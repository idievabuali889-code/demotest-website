(()=>{const{useState:P,useEffect:V,useRef:ge,useMemo:ee,useLayoutEffect:Zt}=React,ea="Odil Accessories",ta="Simple wholesale catalogue with WhatsApp ordering.",Rt="GBP";const Ue="992935563306",ut="nova_wholesale_cart_v1",Ce="nova_owner_products_v1",Fe=document.body.dataset.layout==="owner",Ge=Fe||document.body.dataset.ownerMode!=="disabled",bt=Ge&&!Fe,aa=Fe||document.body.dataset.defaultOwner==="true",ra="/.netlify/functions/catalogue",X="__base__",Ke="__catalog_config__",kt="__",Le="__family:",Ne="__prices",At=a=>(Array.isArray(a)?a:[]).filter(s=>{const e=String(s||"");return e&&!e.startsWith(kt)}),sa=a=>{const s=new Set;return!a||typeof a!="object"||Object.values(a).forEach(e=>{Array.isArray(e)&&e.forEach(o=>{const r=String(o||"").trim().toLowerCase();r&&s.add(r)})}),s},St=(a,s)=>{const e=sa(s);return At(a).filter(o=>!e.has(String(o||"").trim().toLowerCase()))},Ct=a=>{const s=String(a||"").trim(),e=s.indexOf(":");if(e<=0)return null;const o=s.slice(0,e).trim(),r=s.slice(e+1).trim();return!o||!r||o.length>40||r.length>120?null:{label:o,detail:r}},ze=a=>{const e=(Array.isArray(a==null?void 0:a.specs)?a.specs:[]).find(o=>typeof o=="string"&&o.startsWith(Le));return e?String(e).slice(Le.length).trim():""},na=a=>{const s=a!=null&&a.variants&&typeof a.variants=="object"?a.variants:{},o=(Array.isArray(s.Model)?s.Model:[]).map(r=>String(r||"").toLowerCase());return o.some(r=>r.startsWith("iphone"))?"iPhone":o.some(r=>r.startsWith("galaxy a"))?"Samsung A":o.some(r=>r.startsWith("galaxy s"))?"Samsung S":"Accessories"},qe=a=>{const s=ze(a);return s||na(a)},fe=(a={})=>{const s=Object.entries(a||{}).filter(([e,o])=>o!=null&&String(o).trim()!=="");return s.length?s.sort(([e],[o])=>e.localeCompare(o)).map(([e,o])=>`${e}:${o}`).join("|"):X},xe=a=>{if(!a||typeof a!="object")return{};const s={};return Object.entries(a).forEach(([e,o])=>{const r=Number(o);Number.isFinite(r)&&r>=0&&(s[e&&e.trim()||X]=r)}),s},oa=a=>{if(!a||typeof a!="object")return{};const s={};return Object.entries(a).forEach(([e,o])=>{const r=Number(o);Number.isFinite(r)&&r>=0&&(s[e&&e.trim()||X]=r)}),s},Pt=a=>{var s;return oa((s=a==null?void 0:a.variants)==null?void 0:s[Ne])};const la=a=>{const s=Number(a==null?void 0:a.price)||0,e=Pt(a),o=Object.values(e);if(!o.length)return{min:s,max:s,hasOverrides:!1};const r=Math.min(s,...o),h=Math.max(s,...o);return{min:r,max:h,hasOverrides:r!==h}},Ot=window.SUPABASE_PUBLIC_CONFIG||{},He=Ot.url||"",Mt=Ot.anonKey||"",ia=!!(He&&Mt);let ye=null;try{window.supabase&&ia?(ye=window.supabase.createClient(He,Mt),console.log("\u2705 Supabase client initialized successfully"),console.log("\u{1F4CD} Supabase URL:",He),setTimeout(async()=>{try{console.log("\u{1F504} Testing database connection...");const{data:s,error:e}=await ye.from("products").select("count").limit(1);e?(console.error("\u274C Database test failed:",e),e.message.includes("permission denied")&&console.error("\u{1F6AB} RLS Policy Issue: Run the SQL script to fix permissions"),e.message.includes('relation "products" does not exist')&&console.error("\u{1F3D7}\uFE0F Table Missing: Run the SQL script to create the products table")):console.log("\u2705 Database connection successful"),console.log("\u{1F504} Testing realtime connection...");const o=ye.channel("test-channel");o.subscribe(r=>{r==="SUBSCRIBED"?(console.log("\u2705 Realtime connection successful"),o.unsubscribe()):r==="CHANNEL_ERROR"&&console.error("\u274C Realtime connection failed")})}catch(s){console.error("\u274C Connection test failed:",s)}},1e3)):console.warn("\u26A0\uFE0F Supabase not initialized - supply SUPABASE_PUBLIC_CONFIG in supabase-config.js")}catch(a){console.error("\u274C Supabase initialization failed:",a)}const Ve=async(a,s=3,e=1e3)=>{for(let o=1;o<=s;o++)try{return await a()}catch(r){if(console.warn(`\u26A0\uFE0F Attempt ${o}/${s} failed:`,r.message),o===s)throw r;await new Promise(h=>setTimeout(h,e*o))}},ca=async()=>{var a;try{if(!ye)return null;const{data:s}=await ye.auth.getSession(),e=(a=s==null?void 0:s.session)==null?void 0:a.access_token;return e?`Bearer ${e}`:null}catch(s){return null}},De=async(a,s)=>{try{const e=await ca(),o=await fetch(ra,{method:"POST",headers:{"Content-Type":"application/json",...e?{Authorization:e}:{}},body:JSON.stringify({action:a,data:s})});if(!o.ok){const h=await o.text().catch(()=>"");throw new Error(`Owner API ${a} failed: ${o.status} ${h}`)}const r=await o.json().catch(()=>({}));if(r!=null&&r.error){const h=new Error(r.error.message||r.error);throw h.details=r.error.details,h.hint=r.error.hint,h.code=r.error.code,h}return r}catch(e){throw console.error(`Owner API ${a} error`,e),e}},ie=a=>{var _;if(!a)return null;const{sourceid:s,sourceId:e,images:o,image:r,specs:h,variants:v,inventory:b,price:S,hidden:R,...d}=a,p=(_=e!=null?e:s)!=null?_:null,c=B=>Array.isArray(B)?B:B==null?[]:typeof B=="string"&&B.trim().length?[B]:[],u=c(o),M=c(h),F=typeof v=="object"&&v!==null&&!Array.isArray(v)?v:{},G=xe(b),y=r||u[0]||void 0,D=u.length?u:y?[y]:[];return{...d,sourceId:p,images:D,specs:M,variants:F,inventory:G,price:typeof S=="number"?S:Number(S)||0,hidden:!!R,image:y}},Bt=a=>{var r;const s={id:a.id,name:a.name,sku:a.sku,category:a.category,price:Number(a.price)||0,description:(r=a.description)!=null?r:""},e=Array.isArray(a.images)?a.images:a.image?[a.image]:[];s.images=e,s.specs=Array.isArray(a.specs)?a.specs:[],s.variants=a.variants&&typeof a.variants=="object"&&!Array.isArray(a.variants)?a.variants:{},a.sourceId&&(s.sourceid=a.sourceId),a.hidden&&(s.hidden=!0);const o=xe(a.inventory);return s.inventory=o,s},pt=async()=>{if(!ye)return console.warn("\u26A0\uFE0F Cannot load products: Supabase not initialized"),[];try{console.log("\u{1F504} Loading products from database...");const{data:a,error:s}=await ye.from("products").select("*").order("created_at",{ascending:!1});if(s)throw console.error("\u274C Database error:",s),s;return console.log(`\u2705 Loaded ${(a==null?void 0:a.length)||0} products from database`),(a||[]).map(ie).filter(Boolean)}catch(a){return console.error("Failed to load products:",a),[]}},ma=async a=>{try{const s=Bt(a),{data:e}=await Ve(()=>De("insert",s)),o=ie(e);return console.log("\u2705 Product saved successfully:",o),o}catch(s){return console.error("\u274C Failed to save product after retries:",s),null}},ft=async a=>{try{const s=Bt(a),{data:e}=await Ve(()=>De("upsert",s));return ie(e)}catch(s){return console.error("Failed to upsert product:",s),null}},da=async a=>{try{return await Ve(()=>De("delete",{id:a})),!0}catch(s){return console.error("Failed to delete product:",s),!1}};const Oe=["All","Phone Screens","Back Glass","Power Banks","Screen Protectors","Batteries","Mobile Phones","Tablets","Phone Cases","Cables","Chargers","Earphones","Charging Ports","Face ID"],Re=["iPhone 11","iPhone 12","iPhone 12 Pro","iPhone 13","iPhone 13 Pro","iPhone 14","iPhone 14 Pro","iPhone 15","iPhone 15 Plus","iPhone 15 Pro","iPhone 15 Pro Max","iPhone 16","iPhone 16 Pro","iPhone 16 Pro Max"],_t=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],nr=[...Re,..._t],Te=["Galaxy S20","Galaxy S21","Galaxy S22","Galaxy S23","Galaxy S24","Galaxy S25"],$e=["Galaxy A14","Galaxy A24","Galaxy A34","Galaxy A54","Galaxy A55","Galaxy A15"],ua=["iPhone","Samsung S","Samsung A"],ba={iPhone:Re,"Samsung S":Te,"Samsung A":$e},It=()=>({version:1,categories:Oe.filter(a=>a!=="All"),families:[{id:"iphone",name:"iPhone",models:[...Re]},{id:"samsung_s",name:"Samsung S",models:[...Te]},{id:"samsung_a",name:"Samsung A",models:[...$e]},{id:"accessories",name:"Accessories",models:[]}],groupsByCategory:{},groupOverridesByCategoryFamily:{},groupHiddenByCategoryFamily:{}}),pa=a=>{const s=It();if(!a||typeof a!="object")return s;const e={...s,...a};return e.categories=Array.isArray(e.categories)?e.categories.filter(Boolean):s.categories,e.families=Array.isArray(e.families)?e.families.filter(Boolean):s.families,e.groupsByCategory=e.groupsByCategory&&typeof e.groupsByCategory=="object"?e.groupsByCategory:{},e.groupOverridesByCategoryFamily=e.groupOverridesByCategoryFamily&&typeof e.groupOverridesByCategoryFamily=="object"?e.groupOverridesByCategoryFamily:{},e.groupHiddenByCategoryFamily=e.groupHiddenByCategoryFamily&&typeof e.groupHiddenByCategoryFamily=="object"?e.groupHiddenByCategoryFamily:{},e};function fa(a){const[s,e]=P(()=>It());return V(()=>{var h;const o=(a||[]).find(v=>v&&v.id===Ke),r=(h=o==null?void 0:o.variants)==null?void 0:h.__config;r&&typeof r=="object"&&e(pa(r))},[a]),s}const gt=["Original","OEM","AAA","Aftermarket","Refurb"],ga=["TPU","Silicone","PC","Leather"],Pe=["Black","White","Navy","Clear","Red","Lavender","Stone","Midnight","Starlight","Blue","Green","Gold"],Qe={Black:"#111827",White:"#ffffff",Navy:"#1e3a8a",Clear:"#ffffff",Red:"#ef4444",Lavender:"#b57edc",Stone:"#a8a29e",Midnight:"#0f172a",Starlight:"#f8fafc",Blue:"#3b82f6",Green:"#10b981",Gold:"#f59e0b"};function Me({name:a}){const s=Qe[a],e=s?{backgroundColor:s,border:"1px solid rgba(0,0,0,.15)"}:{backgroundImage:"linear-gradient(45deg,#e5e7eb 25%,transparent 25%),linear-gradient(-45deg,#e5e7eb 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#e5e7eb 75%),linear-gradient(-45deg,transparent 75%,#e5e7eb 75%)",backgroundSize:"8px 8px",border:"1px solid rgba(0,0,0,.15)"};return React.createElement("span",{"aria-hidden":"true",className:"inline-block h-3 w-3 rounded-full align-[-2px]",style:e})}const ha=["Tempered","Hydrogel"],ya=["Clear","Matte","Privacy"],xa=["1-Pack","2-Pack"],va=["Edge-to-edge","Full glue"],ht=["USB-C \u2194 USB-C","USB-C \u2194 Lightning","USB-A \u2194 Micro-USB"],jt=["0.5m","1m","2m"],wa=["27W","60W","100W"],Na=["MFi","USB-IF"],Ea=["Standard","Braided",">10k bends"],Ra=["20W","30W","45W","65W"],yt=["1\xD7USB-C","1\xD7USB-A","1\xD7USB-C + 1\xD7USB-A","2\xD7USB-C"],Ee=["PD 3.0","PPS","QC 3.0","QC 4+"];const ka=["UK 3-pin","EU","US"],xt=["New","Refurb","Used A","Used B"],Aa=["Unlocked","Locked","Dual-SIM Yes","Dual-SIM No"],Sa=["5G","4G"],Ca=["Wi-Fi","Wi-Fi + Cellular"],vt=["32GB","64GB","128GB","256GB","512GB","1TB"],wt=["3GB","4GB","6GB","8GB","12GB","16GB"];const Pa=jt;const Oa=["10,000 mAh","20,000 mAh"],Nt=[{id:"sp-iph-13-tmp-2pk",name:"Tempered Glass \u2013 iPhone 13 (2\u2011Pack)",sku:"SP-IP13-TG2",category:"Screen Protectors",price:3.2,specs:["2\u2011Pack","Tempered","9H","Oleophobic"],description:"Clear tempered glass for iPhone 13.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.07_b6d5696d.jpg",variants:{Model:["iPhone 13"],Material:["Tempered"],Pack:["2\u2011Pack"]}},{id:"sp-iph-14-hg-1pk",name:"Hydrogel Protector \u2013 iPhone 14",sku:"SP-IP14-HG1",category:"Screen Protectors",price:2.6,specs:["Hydrogel","Self\u2011healing","Case\u2011friendly"],description:"Flexible hydrogel film.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.08_46a12f36.jpg",variants:{Model:["iPhone 14"],Material:["Hydrogel"],Pack:["1\u2011Pack","2\u2011Pack"]}},{id:"case-slim-tpu-iph-11-16",name:"Slim TPU Case \u2013 iPhone Series",sku:"CA-IP-TPU",category:"Phone Cases",price:3.9,specs:["TPU","Slim","Matte"],description:"Slim matte TPU case.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.09_811264ed.jpg",variants:{Color:["Black","Navy","Clear","Red"],Material:["TPU"],Model:Re}},{id:"case-silicone-sg-s20-s25",name:"Soft Silicone Case \u2013 Galaxy Series",sku:"CA-SG-SIL",category:"Phone Cases",price:4.1,specs:["Silicone","Microfiber"],description:"Soft\u2011touch silicone for Galaxy.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.10_3d78676b.jpg",variants:{Color:["Midnight","Stone","Lavender"],Material:["Silicone"],Model:_t}},{id:"chg-65w-gan-dual",name:"65W GaN Charger \u2013 Dual Port",sku:"CH-65W-GAN",category:"Chargers",price:12.5,specs:["65W","USB\u2011C + USB\u2011A","PD/QC"],description:"Compact GaN charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_89070b32.jpg",variants:{Wattage:["65W"],Ports:["USB\u2011C + USB\u2011A"],Standard:Ee}},{id:"chg-20w-usbc",name:"20W USB\u2011C Wall Charger",sku:"CH-20W-USBC",category:"Chargers",price:6,specs:["20W","USB\u2011C","PD"],description:"USB\u2011C PD charger.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.11_9ebc1ea2.jpg",variants:{Wattage:["20W"],Ports:["USB\u2011C"],Standard:["PD 3.0"]}},{id:"cbl-usbc-60w-1m-2m",name:"USB\u2011C Cable 60W",sku:"CB-UC-60",category:"Cables",price:2.2,specs:["USB\u2011C","60W","Nylon"],description:"Braided 60W cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.12_628fcab2.jpg",variants:{Connector:["USB\u2011C \u2194 USB\u2011C"],Length:Pa,Rating:["60W"]}},{id:"cbl-lightning-mfi",name:"Lightning Cable (MFi)",sku:"CB-LT-MFI",category:"Cables",price:3.5,specs:["Lightning","MFi","1m"],description:"MFi Lightning cable.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.13_22d8e7c9.jpg",variants:{Connector:["USB\u2011C \u2194 Lightning"],Length:["1m"],Rating:["27W"]}},{id:"ear-wired-classic",name:"Wired Earphones \u2013 Classic",sku:"EA-WI-CLS",category:"Earphones",price:4.2,specs:["3.5mm","In\u2011line mic"],description:"Wired earphones.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.14_4f407f9a.jpg",variants:{Connector:["3.5mm"],Color:["Black","White"]}},{id:"ear-tws-basic",name:"TWS Earbuds \u2013 Basic",sku:"EA-TWS-BSC",category:"Earphones",price:12.9,specs:["BT 5.3","20h"],description:"TWS earbuds.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.15_e7b8adc0.jpg",variants:{Color:["White","Black"],Standard:["BT 5.3"]}},{id:"pb-10000-compact",name:"Power Bank 10,000 mAh",sku:"PB-10K-CMP",category:"Power Banks",price:11,specs:["10,000 mAh","USB\u2011C","PD"],description:"Slim 10k power bank.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.17_01d0dcae.jpg",variants:{Capacity:["10,000 mAh"],Ports:["USB\u2011C","USB\u2011A"],Standard:Ee}},{id:"pb-20000-dual",name:"Power Bank 20,000 mAh \u2013 Dual",sku:"PB-20K-DUAL",category:"Power Banks",price:16.5,specs:["20,000 mAh","Dual","PD/QC"],description:"20k dual output.",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.19_3b58c17b.jpg",variants:{Capacity:["20,000 mAh"],Ports:["USB\u2011C + USB\u2011A"],Standard:Ee}},{id:"img-001",name:"Accessory Photo A",sku:"IM-001",category:"Phone Cases",price:2.5,specs:["Assorted"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.33_5dd08e33.jpg"},{id:"img-002",name:"Accessory Photo B",sku:"IM-002",category:"Chargers",price:7.2,specs:["Fast"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_09a1e9d9.jpg"},{id:"img-003",name:"Accessory Photo C",sku:"IM-003",category:"Cables",price:1.8,specs:["1m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.34_f1935767.jpg"},{id:"img-004",name:"Accessory Photo D",sku:"IM-004",category:"Screen Protectors",price:2.9,specs:["Tempered"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.35_92866963.jpg"},{id:"img-005",name:"Accessory Photo E",sku:"IM-005",category:"Phone Cases",price:3.6,specs:["TPU"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.36_d9ee268e.jpg"},{id:"img-006",name:"Accessory Photo F",sku:"IM-006",category:"Back Glass",price:5.5,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.37_ef5ed98e.jpg"},{id:"img-007",name:"Accessory Photo G",sku:"IM-007",category:"Earphones",price:6,specs:["Wireless"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_b444897c.jpg"},{id:"img-008",name:"Accessory Photo H",sku:"IM-008",category:"Power Banks",price:9.9,specs:["10k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.38_f170faf6.jpg"},{id:"img-009",name:"Accessory Photo I",sku:"IM-009",category:"Cables",price:2,specs:["2m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.39_c37cddc9.jpg"},{id:"img-010",name:"Accessory Photo J",sku:"IM-010",category:"Chargers",price:11.5,specs:["65W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.40_7a858ba3.jpg"},{id:"img-011",name:"Accessory Photo K",sku:"IM-011",category:"Phone Cases",price:4.4,specs:["Silicone"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_80d08b54.jpg"},{id:"img-012",name:"Accessory Photo L",sku:"IM-012",category:"Screen Protectors",price:1.9,specs:["Hydrogel"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.41_a2efd2e1.jpg"},{id:"img-013",name:"Accessory Photo M",sku:"IM-013",category:"Back Glass",price:6.5,specs:["Back glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.42_63c16e8a.jpg"},{id:"img-014",name:"Accessory Photo N",sku:"IM-014",category:"Batteries",price:8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.43_06e00e31.jpg"},{id:"img-015",name:"Accessory Photo O",sku:"IM-015",category:"Phone Cases",price:3.2,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_de3a612b.jpg"},{id:"img-016",name:"Accessory Photo P",sku:"IM-016",category:"Cables",price:2.4,specs:["Nylon"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.44_fddf905d.jpg"},{id:"img-017",name:"Accessory Photo Q",sku:"IM-017",category:"Earphones",price:5,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.45_b1dd7f8a.jpg"},{id:"img-018",name:"Accessory Photo R",sku:"IM-018",category:"Chargers",price:9.5,specs:["30W"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_30024620.jpg"},{id:"img-019",name:"Accessory Photo S",sku:"IM-019",category:"Power Banks",price:14,specs:["20k"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_cb602f30.jpg"},{id:"img-020",name:"Accessory Photo T",sku:"IM-020",category:"Phone Cases",price:3.8,specs:["Leather"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.46_d9e5908c.jpg"},{id:"img-021",name:"Accessory Photo U",sku:"IM-021",category:"Screen Protectors",price:2.7,specs:["Matte"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.47_ac758901.jpg"},{id:"img-022",name:"Accessory Photo V",sku:"IM-022",category:"Cables",price:1.6,specs:["0.5m"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_bc4af4ef.jpg"},{id:"img-023",name:"Accessory Photo W",sku:"IM-023",category:"Chargers",price:4.9,specs:["USB\u2011A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.48_f4496fba.jpg"},{id:"img-024",name:"Accessory Photo X",sku:"IM-024",category:"Earphones",price:13.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.49_ad6d3003.jpg"},{id:"img-025",name:"Accessory Photo Y",sku:"IM-025",category:"Phone Cases",price:2.9,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.50_b3694795.jpg"},{id:"img-026",name:"Accessory Photo Z",sku:"IM-026",category:"Back Glass",price:7,specs:["Glass"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.51_5e67178c.jpg"},{id:"img-027",name:"Accessory Photo AA",sku:"IM-027",category:"Batteries",price:6.9,specs:["Refurb"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.52_df23fdba.jpg"},{id:"img-028",name:"Accessory Photo AB",sku:"IM-028",category:"Chargers",price:8.5,specs:["PD"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.53_13d347f3.jpg"},{id:"img-029",name:"Accessory Photo AC",sku:"IM-029",category:"Cables",price:2.1,specs:["Braided"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_5c3d1851.jpg"},{id:"img-030",name:"Accessory Photo AD",sku:"IM-030",category:"Power Banks",price:12.2,specs:["Dual output"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.54_8f092381.jpg"},{id:"img-031",name:"Accessory Photo AE",sku:"IM-031",category:"Earphones",price:3.9,specs:["Wired"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.56_cbdfea17.jpg"},{id:"img-032",name:"Accessory Photo AF",sku:"IM-032",category:"Phone Cases",price:4.5,specs:["Patterned"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_61b6ae02.jpg"},{id:"img-033",name:"Accessory Photo AG",sku:"IM-033",category:"Screen Protectors",price:2.3,specs:["Clear"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.57_efd60a9b.jpg"},{id:"img-034",name:"Accessory Photo AH",sku:"IM-034",category:"Chargers",price:10,specs:["GaN"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.36.58_082b158d.jpg"},{id:"img-035",name:"Accessory Photo AI",sku:"IM-035",category:"Power Banks",price:15,specs:["High capacity"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.00_7e6451d4.jpg"},{id:"img-036",name:"Accessory Photo AJ",sku:"IM-036",category:"Cables",price:1.5,specs:["USB-C"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.01_bf466384.jpg"},{id:"img-037",name:"Accessory Photo AK",sku:"IM-037",category:"Earphones",price:7.5,specs:["TWS"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2920cb02.jpg"},{id:"img-038",name:"Accessory Photo AL",sku:"IM-038",category:"Phone Cases",price:3.1,specs:["Transparent"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_2ae9f56f.jpg"},{id:"img-039",name:"Accessory Photo AM",sku:"IM-039",category:"Back Glass",price:6.8,specs:["OEM"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.03_725a57bf.jpg"},{id:"img-040",name:"Accessory Photo AN",sku:"IM-040",category:"Chargers",price:5.5,specs:["USB-A"],description:"Sample product using real photo",image:"\u0418\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 WhatsApp 2025-08-16 \u0432 15.37.04_faa6a5d9.jpg"}],oe=a=>new Intl.NumberFormat("en-GB",{style:"currency",currency:Rt}).format(a),te=(...a)=>a.filter(Boolean).join(" ");function Ma(){const[a,s]=P(!1);return V(()=>{var r;const e=window.matchMedia("(prefers-reduced-motion: reduce)");s(e.matches);const o=()=>s(e.matches);return(r=e.addEventListener)==null||r.call(e,"change",o),()=>{var h;return(h=e.removeEventListener)==null?void 0:h.call(e,"change",o)}},[]),a}function we(a){const s=encodeURIComponent("#f3f4f6"),e=encodeURIComponent("#6b7280"),o=encodeURIComponent(a),r=`<?xml version='1.0' encoding='UTF-8'?><svg xmlns='http://www.w3.org/2000/svg' width='800' height='600' role='img' aria-label='${o}'><rect width='100%' height='100%' fill='${s}'/><g fill='${e}' font-family='system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif'><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='24'>${o}</text></g></svg>`;return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(r)}`}function Be(a,s){return a?a.startsWith("data:")||a.startsWith("http")?a:`/img/${a}`:we(s)}function Ba(a){const s=Array.isArray(a.images)&&a.images.length?a.images:a.image?[a.image]:[];return s.length?s:[we(a.name)]}function Et(a){const s=Ba(a);return Be(s[0],a.name)}function Je(a,s,e){const o=ge(e);V(()=>{o.current=e},[e]),V(()=>{if(!a||!s.current)return;const r=s.current,h=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","),v=document.activeElement,b=Array.from(r.querySelectorAll(h));if(!b.length)r.hasAttribute("tabindex")||r.setAttribute("tabindex","-1"),typeof r.focus=="function"&&r.focus({preventScroll:!0});else{const R=b[0];R&&typeof R.focus=="function"&&R.focus({preventScroll:!0})}const S=R=>{var d;if(R.key==="Escape"&&(R.stopPropagation(),(d=o.current)==null||d.call(o)),R.key==="Tab"&&b.length){const p=b[0],c=b[b.length-1];R.shiftKey&&document.activeElement===p?(R.preventDefault(),c.focus()):!R.shiftKey&&document.activeElement===c&&(R.preventDefault(),p.focus())}};return r.addEventListener("keydown",S),()=>{if(r.removeEventListener("keydown",S),v&&typeof v.focus=="function"&&document.contains(v))try{v.focus({preventScroll:!0})}catch(R){v.focus()}}},[a,s])}function _a(a,s){const e=ge(0),o=ge(null);Zt(()=>{if(typeof window=="undefined"||!a)return;const r=document.body,h=document.documentElement;if(!r||!h)return;const v=window.scrollY||window.pageYOffset||0,b=s&&Number.isFinite(s.current)?s.current:v;return e.current=b,o.current={htmlLocked:h.classList.contains("is-locked"),bodyLocked:r.classList.contains("is-locked"),lockY:r.style.getPropertyValue("--lock-y")},r.style.setProperty("--lock-y",`-${b}px`),h.classList.add("is-locked"),r.classList.add("is-locked"),()=>{const S=o.current||{};S.htmlLocked||h.classList.remove("is-locked"),S.bodyLocked||r.classList.remove("is-locked"),S.lockY?r.style.setProperty("--lock-y",S.lockY):r.style.removeProperty("--lock-y"),window.scrollTo(0,e.current||0),o.current=null}},[a,s])}function Ia(){const a=d=>{if(!d)return null;const p=d.variants&&typeof d.variants=="object"&&!Array.isArray(d.variants)?d.variants:{},c=d.inventoryKey||fe(p),u=Math.max(0,Number(d.qty)||0);return{...d,variants:p,inventoryKey:c,qty:u}},[s,e]=P([]),[o,r]=P("");V(()=>{try{const d=localStorage.getItem(ut);if(d){const p=JSON.parse(d);Array.isArray(p.items)&&e(p.items.map(a).filter(Boolean)),typeof p.notes=="string"&&r(p.notes)}}catch(d){}},[]),V(()=>{try{localStorage.setItem(ut,JSON.stringify({items:s,notes:o}))}catch(d){}},[s,o]);const h=d=>e(p=>{const c=a(d);if(!c)return p;const u=p.findIndex(M=>M.id===c.id&&JSON.stringify(M.variants||{})===JSON.stringify(c.variants||{})&&(M.inventoryKey||X)===(c.inventoryKey||X));if(u>=0){const M=[...p];return M[u]={...M[u],qty:Math.max(0,Number(M[u].qty||0)+c.qty)},M}return[...p,c]}),v=(d,p)=>e(c=>c.map((u,M)=>M===d?{...u,qty:Math.max(0,Number(p)||0)}:u)),b=d=>e(p=>p.filter((c,u)=>u!==d)),S=()=>e([]),R=s.reduce((d,p)=>d+p.price*p.qty,0);return{items:s,add:h,updateQty:v,removeIndex:b,clear:S,subtotal:R,notes:o,setNotes:r}}function ja(){const[a,s]=P([]),[e,o]=P(!0),[r,h]=P("connecting");V(()=>{(async()=>{try{h("connecting");const d=await pt();s(d);try{localStorage.setItem(Ce,JSON.stringify(d))}catch(p){}h("connected")}catch(d){console.error("Failed to load products from database:",d),h("error");try{const p=localStorage.getItem(Ce);if(p){const c=JSON.parse(p);Array.isArray(c)&&s(c.map(ie).filter(Boolean))}}catch(p){}}finally{o(!1)}})()},[]),V(()=>{if(!ye){console.warn("\u26A0\uFE0F Cannot setup realtime: Supabase not initialized");return}console.log("\u{1F504} Setting up realtime subscription...");const R=ye.channel("schema-db-changes").on("postgres_changes",{event:"*",schema:"public",table:"products"},d=>{console.log("\u{1F534} Realtime event received:",d.eventType,d),s(p=>{if(d.eventType==="INSERT"){console.log("\u2795 Adding product via realtime:",d.new.name);const c=ie(d.new),u=p.findIndex(M=>M.id===c.id);if(u>=0){console.log("\u{1F504} Updating existing product instead of duplicating");const M=[...p];return M[u]=c,M}return[c,...p]}if(d.eventType==="UPDATE"){console.log("\u270F\uFE0F Updating product via realtime:",d.new.name);const c=ie(d.new);return p.map(u=>u.id===d.new.id?c:u)}return d.eventType==="DELETE"?(console.log("\u{1F5D1}\uFE0F Deleting product via realtime:",d.old.id),p.filter(c=>c.id!==d.old.id)):p})}).subscribe(d=>{console.log("\u{1F534} Realtime status:",d),d==="SUBSCRIBED"?(console.log("\u2705 Realtime subscription active!"),h("connected"),pt().then(p=>{console.log("\u{1F504} Reloaded products after reconnection");const c=p.map(ie).filter(Boolean);s(c);try{localStorage.setItem(Ce,JSON.stringify(c))}catch(u){}}).catch(p=>{console.error("\u274C Failed to reload products after reconnection:",p)})):d==="CHANNEL_ERROR"||d==="CLOSED"?(console.error("\u274C Realtime subscription failed!"),h("error")):(console.log("\u{1F504} Realtime connecting..."),h("connecting"))});return()=>{console.log("\u{1F50C} Cleaning up realtime subscription"),R.unsubscribe()}},[]);const v=R=>{if(typeof R=="function")s(d=>{const p=R(d),c=(Array.isArray(p)?p:[]).map(ie).filter(Boolean);try{localStorage.setItem(Ce,JSON.stringify(c))}catch(u){}return c});else{const d=(Array.isArray(R)?R:[]).map(ie).filter(Boolean);s(d);try{localStorage.setItem(Ce,JSON.stringify(d))}catch(p){}}};return{ownerProducts:a,setOwnerProducts:v,addProduct:async R=>{const d=await ma(R);if(d)return v(c=>[d,...c]),{product:d,persisted:!0};const p=ie(R);return v(c=>[p,...c]),{product:p,persisted:!1}},deleteProduct:async R=>{const d=await da(R);return d&&v(p=>p.filter(c=>c.id!==R)),d},loading:e,connectionStatus:r}}function Wa({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))}function Ye({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}function La({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}function Wt({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}))}function Ta({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"}))}function $a({className:a}){return React.createElement("svg",{className:a,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.164a1.5 1.5 0 0 0-1.5 1.5v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}function Lt({className:a}){return React.createElement("svg",{className:a,fill:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 0 1-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 0 1-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 0 1 2.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0 0 12.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 0 0 5.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0 0 20.885 3.488"}))}function Fa(){return React.createElement("a",{href:"#main",className:"sr-only focus:not-sr-only focus:fixed focus:top-2 focus:left-2 rounded-full border border-[var(--surface-border)] bg-white/90 px-3 py-2 text-sm font-semibold text-brand shadow-sm backdrop-blur"},"Skip to content")}function Da({onOpenCart:a,search:s,setSearch:e,ownerMode:o,setOwnerMode:r,cartQty:h,connectionStatus:v,allowOwnerToggle:b,families:S,family:R,setFamily:d,categories:p,category:c,setCategory:u}){const[M,F]=P(!1),G=ge(null),y=ge(null),[D,_]=P({left:!1,right:!1});V(()=>{const x=()=>F(window.scrollY>4);return x(),window.addEventListener("scroll",x,{passive:!0}),()=>window.removeEventListener("scroll",x)},[]),V(()=>{const x=()=>{var K;const z=((K=G.current)==null?void 0:K.offsetHeight)||64;document.documentElement.style.setProperty("--header-offset",z+"px")};return x(),window.addEventListener("resize",x,{passive:!0}),()=>window.removeEventListener("resize",x)},[o,s,S,p]),V(()=>{if(o)return;const x=()=>{const K=y.current;if(!K)return;const{scrollLeft:I,scrollWidth:q,clientWidth:H}=K,se=I>0,l=I+H<q-1;_(m=>m.left===se&&m.right===l?m:{left:se,right:l})};x();const z=y.current;if(z)return z.addEventListener("scroll",x,{passive:!0}),window.addEventListener("resize",x),()=>{z.removeEventListener("scroll",x),window.removeEventListener("resize",x)}},[o,S]);const B=v==="connected"?{wrapper:"border border-emerald-200 bg-emerald-50/80 text-emerald-600",dot:"bg-emerald-500",label:"Online"}:v==="error"?{wrapper:"border border-rose-200 bg-rose-50/80 text-rose-600",dot:"bg-rose-500",label:"Offline"}:{wrapper:"border border-amber-200 bg-amber-50/80 text-amber-600",dot:"bg-amber-400 animate-pulse",label:"Connecting"},re=te("chip-scroll -mx-4",D.left&&"show-left",D.right&&"show-right");return React.createElement("header",{ref:G,className:te("sticky top-0 z-40 w-full border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-xl transition-shadow duration-300",M?"shadow-sm":"")},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex h-16 items-center justify-between gap-3"},React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement(Wa,{className:"h-7 w-7 text-brand flex-shrink-0"}),React.createElement("div",{className:"flex items-center gap-3 min-w-0"},React.createElement("span",{className:"font-semibold text-slate-900 text-sm sm:text-base tracking-tight truncate"},ea),React.createElement("div",{className:`hidden md:flex items-center gap-1 rounded-full px-2.5 py-1 text-[11px] font-medium ${B.wrapper}`,title:`Database ${v}`},React.createElement("span",{className:`inline-block h-2 w-2 rounded-full ${B.dot}`}),React.createElement("span",null,B.label)))),React.createElement("nav",{className:"flex items-center gap-1.5 sm:gap-2"},!o&&React.createElement("label",{className:"relative hidden sm:block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:s,onChange:x=>e(x.target.value),placeholder:"Search products\u2026",type:"search",className:"w-48 md:w-64 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(Ye,{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),b&&React.createElement("button",{onClick:()=>r(!o),className:te("rounded-full border px-3 py-2 text-xs sm:text-sm font-medium transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",o?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/60 text-slate-700 hover:bg-white/80")},o?"Back":"Owner"),React.createElement("button",{onClick:a,className:"relative inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/60 px-2.5 sm:px-3.5 py-2 text-xs sm:text-sm font-medium text-slate-700 transition-colors hover:bg-white/80 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(La,{className:"h-4 w-4 text-brand"}),React.createElement("span",{className:"hidden sm:inline"},"Cart"),h>0&&React.createElement("span",{"aria-live":"polite",className:"absolute -top-1.5 -right-1.5 inline-flex h-5 min-w-[1.25rem] items-center justify-center rounded-full border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-1 text-[10px] font-semibold text-brand"},String(h))))),!o&&React.createElement("div",{className:"sm:hidden pb-0"},React.createElement("label",{className:"relative block"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:s,onChange:x=>e(x.target.value),placeholder:"Search products\u2026",type:"search",className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm font-medium text-slate-700 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent placeholder:text-slate-400"}),React.createElement(Ye,{className:"pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}))),!o&&Array.isArray(S)&&S.length>0&&React.createElement("div",{className:"sm:hidden mt-2 pb-3","aria-label":"Filters"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("label",{className:"block"},React.createElement("span",{className:"sr-only"},"Family"),React.createElement("select",{value:R,onChange:x=>d(x.target.value),className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm font-semibold text-slate-700 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"},(S||[]).map(x=>React.createElement("option",{key:x,value:x},x)))),React.createElement("label",{className:"block"},React.createElement("span",{className:"sr-only"},"Category"),React.createElement("select",{value:c,onChange:x=>u(x.target.value),className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm font-semibold text-slate-700 shadow-inner backdrop-blur focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"},(p||[]).map(x=>React.createElement("option",{key:x,value:x},x)))))),!o&&Array.isArray(S)&&S.length>0&&React.createElement("div",{className:"mt-2 pb-2 hidden sm:block","aria-label":"Families"},React.createElement("div",{className:re},React.createElement("div",{ref:y,className:"chip-scroll-inner overflow-x-auto px-4"},React.createElement("div",{className:"flex gap-2 py-2 text-[11px]"},S.map(x=>React.createElement("button",{key:x,onClick:()=>d(x),"aria-pressed":R===x,className:te("inline-flex items-center whitespace-nowrap rounded-full border px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",R===x?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/70 text-slate-600 hover:text-slate-900 hover:bg-white/90")},x))))))))}function Ua(){const a=[{title:"1. Browse products",detail:"Search or tap a category to find what you need."},{title:"2. Open an item",detail:"Choose the variants and quantities, then add to cart."},{title:"3. Review the cart",detail:"Adjust quantities or notes before sending."},{title:"4. Send via WhatsApp",detail:"Use the cart button to submit the full list for confirmation."}];return React.createElement("section",{"aria-labelledby":"hero-title",className:"border-b border-[var(--surface-border)] bg-hero-gradient"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16"},React.createElement("div",{className:"grid gap-12 lg:grid-cols-[minmax(0,1fr)_420px] items-start"},React.createElement("div",{className:"space-y-6"},React.createElement("span",{className:"inline-flex items-center gap-2 rounded-full border border-[var(--surface-border)] bg-white/60 px-3 py-1 text-[11px] font-medium uppercase tracking-[0.14em] text-slate-600"},"Odil Accessories"),React.createElement("h1",{id:"hero-title",className:"text-[clamp(30px,6vw,48px)] font-semibold leading-tight tracking-tight text-slate-900"},"Wholesale catalogue for partner shops"),React.createElement("p",{className:"max-w-2xl text-base sm:text-lg text-slate-600"},ta),React.createElement("div",{className:"flex flex-wrap gap-3"},React.createElement("a",{href:"#catalogue",className:"inline-flex items-center gap-2 rounded-full bg-brand px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Browse catalogue",React.createElement(Ta,{className:"h-4 w-4"})),React.createElement("a",{href:`https://wa.me/${Ue}`,target:"_blank",rel:"noreferrer noopener",className:"inline-flex items-center gap-2 rounded-full border border-[rgba(37,99,235,0.35)] bg-white/70 px-5 py-2.5 text-sm font-semibold text-slate-800 shadow-sm backdrop-blur transition hover:bg-white/90 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement(Lt,{className:"h-4 w-4 text-emerald-500"}),"Chat on WhatsApp")),React.createElement("p",{className:"text-sm text-slate-500"},"Follow the steps on the right when you place an order.")),React.createElement("div",{className:"glass-card rounded-3xl p-8 soft-shadow"},React.createElement("div",{className:"space-y-5 text-sm text-slate-600"},React.createElement("h2",{className:"text-base font-semibold text-slate-900"},"Order steps"),React.createElement("ol",{className:"space-y-3 text-sm"},a.map(s=>React.createElement("li",{key:s.title,className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 px-4 py-3 backdrop-blur"},React.createElement("p",{className:"text-sm font-semibold text-slate-900"},s.title),React.createElement("p",{className:"text-xs text-slate-500 mt-1"},s.detail))))),React.createElement("div",{className:"mt-6 flex items-center justify-between rounded-2xl border border-[var(--surface-border)] bg-white/80 px-4 py-3 text-xs uppercase tracking-[0.18em] text-slate-500"},React.createElement("span",null,"Owner metrics snapshot"),React.createElement("span",{className:"font-semibold text-slate-800"},"Realtime"))))))}function Ga({categories:a,active:s,setActive:e}){const o=ge(null),[r,h]=P({left:!1,right:!1});V(()=>{const b=()=>{const R=o.current;if(!R)return;const{scrollLeft:d,scrollWidth:p,clientWidth:c}=R,u=d>0,M=d+c<p-1;h(F=>F.left===u&&F.right===M?F:{left:u,right:M})};b();const S=o.current;if(S)return S.addEventListener("scroll",b,{passive:!0}),window.addEventListener("resize",b),()=>{S.removeEventListener("scroll",b),window.removeEventListener("resize",b)}},[]);const v=te("chip-scroll -mx-4",r.left&&"show-left",r.right&&"show-right");return React.createElement(React.Fragment,null,React.createElement("div",{className:"hidden sm:block sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8","aria-label":"Categories"},React.createElement("div",{className:v},React.createElement("div",{ref:o,className:"chip-scroll-inner overflow-x-auto px-4"},React.createElement("div",{className:"flex gap-2 py-2 text-[11px]"},(a||[]).map(b=>React.createElement("button",{key:b,onClick:()=>e(b),"aria-pressed":s===b,className:te("inline-flex items-center whitespace-nowrap rounded-full border px-3.5 py-1.5 text-[11px] font-semibold uppercase tracking-[0.18em] transition-colors focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",s===b?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/70 text-slate-600 hover:text-slate-900 hover:bg-white/90")},b))))))))}function Ka({products:a,onOpen:s}){return React.createElement("section",{id:"catalogue","aria-labelledby":"catalogue-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("h2",{id:"catalogue-title",className:"sr-only"},"Catalogue"),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},a.map(e=>React.createElement(za,{key:e.id,product:e,onOpen:s}))))}function za({product:a,onOpen:s}){const[e,o]=P(Et(a));V(()=>{o(Et(a))},[a.image,a.images,a.name]);const r=Object.entries(a.variants||{}).filter(([,_])=>Array.isArray(_)&&_.length>0).map(([_])=>_),h=r.slice(0,3).join(", "),v=r.length>3?` +${r.length-3} more`:"",b=St(a.specs,a.variants),S=[],R=[];b.forEach(_=>{const B=Ct(_);B?S.push(B):R.push(_)});const d=S.slice(0,4),p=R.slice(0,4),c=Math.max(S.length-d.length,0),u=Math.max(R.length-p.length,0),M=a.inventory&&typeof a.inventory=="object"&&Object.keys(a.inventory).length>0,F=qe(a),G=String(a.category||"").trim(),y=la(a),D=y.min===y.max?oe(y.min):`${oe(y.min)}\u2013${oe(y.max)}`;return React.createElement("article",{className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition duration-200 hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full overflow-hidden bg-slate-100"},React.createElement("img",{src:e,onError:()=>o(we(a.name)),alt:a.name,className:"h-full w-full object-cover",loading:"lazy"})),React.createElement("div",{className:"flex flex-1 flex-col gap-4 p-5"},React.createElement("header",null,React.createElement("div",{className:"flex flex-wrap items-center gap-1.5 text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-500"},F&&F!=="All"&&React.createElement("span",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/70 px-2.5 py-0.5 text-slate-600"},F),G&&G!=="All"&&React.createElement("span",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/70 px-2.5 py-0.5 text-slate-600"},G),M&&React.createElement("span",{className:"inline-flex items-center rounded-full border border-amber-200 bg-amber-50/80 px-2.5 py-0.5 text-amber-700"},"Limited stock")),React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("h3",{className:"text-base font-semibold text-slate-900"},a.name),React.createElement("div",{className:"flex flex-col items-end gap-1"},React.createElement("span",{className:"text-base font-semibold text-slate-900 whitespace-nowrap"},D),y.hasOverrides&&React.createElement("span",{className:"text-[10px] font-semibold uppercase tracking-[0.18em] text-slate-400"},"Price range"))),a.description&&React.createElement("p",{className:"mt-2 text-sm text-slate-600",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"}},a.description),React.createElement("p",{className:"mt-2 text-[11px] font-medium uppercase tracking-[0.18em] text-slate-400"},"SKU ",a.sku)),d.length>0&&React.createElement("dl",{className:"grid grid-cols-1 gap-2 text-sm"},d.map(({label:_,detail:B})=>React.createElement("div",{key:`${_}:${B}`,className:"flex items-baseline justify-between gap-3 rounded-2xl border border-[var(--surface-border)] bg-white/60 px-3 py-2"},React.createElement("dt",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-slate-500"},_),React.createElement("dd",{className:"text-sm font-semibold text-slate-900"},B))),c>0&&React.createElement("div",{className:"text-xs text-slate-500"},`+${c} more details`)),p.length>0&&React.createElement("div",{className:"flex flex-wrap gap-1.5 text-[11px]"},p.map(_=>React.createElement("span",{key:_,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 font-medium text-slate-600"},_)),u>0&&React.createElement("span",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/60 px-2.5 py-0.5 font-medium text-slate-500"},`+${u} more`)),r.length>0&&React.createElement("div",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/60 px-3 py-2 text-xs text-slate-600"},React.createElement("div",{className:"text-[10px] font-semibold uppercase tracking-[0.16em] text-slate-500"},"Customer choices"),React.createElement("p",{className:"mt-1 font-medium text-slate-700"},h||"\u2014",v)),React.createElement("div",{className:"mt-auto"},React.createElement("button",{type:"button",onClick:()=>s(a),className:"w-full rounded-full border border-[rgba(37,99,235,0.28)] bg-white/70 px-4 py-2 text-sm font-semibold text-brand transition hover:bg-brand hover:text-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"View details"))))}function qa({product:a,onClose:s,onAdd:e,cartItems:o}){const r=a&&a.__edit&&a.product?a.product:a;if(!r)return null;const h=Array.isArray(o)?o:[],v=ee(()=>xe(r.inventory),[r.inventory]),b=ee(()=>Pt(r),[r.variants]),S=ee(()=>{const l={};return h.forEach(m=>{if(!m||m.id!==r.id)return;const k=m.inventoryKey||fe(m.variants||{});l[k]=(l[k]||0)+Number(m.qty||0)}),l},[h,r.id]),R=ge(null);Je(!!r,R,s);const d=(()=>{const l=Array.isArray(r.images)&&r.images.length?r.images:r.image?[r.image]:[];return(l.length?l:[we(r.name)]).map(m=>Be(m,r.name))})(),p=r.variants||{},c=Object.entries(p).filter(([,l])=>Array.isArray(l)&&l.length>0).map(([l])=>l),u=ee(()=>{const l=St(r.specs,r.variants),m=[],k=[];return l.forEach(O=>{const N=Ct(O);N?m.push(N):k.push(O)}),{pairs:m,tags:k}},[r.specs,r.variants]),M=ee(()=>{const l=Number(r.price)||0,m=Object.values(b||{}),k=m.length?Math.min(l,...m):l,O=m.length?Math.max(l,...m):l,N=k===O?oe(k):`${oe(k)}\u2013${oe(O)}`,t=m.length?"From ":"Unit ",E=String(r.sku||"").trim();return{label:`${t}${N}${E?` \xB7 SKU ${E}`:""}`}},[r.price,r.sku,b]),[F,G]=P({}),[y,D]=P({}),[_,B]=P({});V(()=>{if(!r)return;const l={};c.forEach(O=>{const N=p[O]||[];l[O]=N.length?[N[0]]:[]}),G(l);const m=(()=>{if(c.length===0)return[X];const O=[],N=(t,E)=>{if(t===c.length){O.push(fe(E));return}const j=c[t];(l[j]||[]).forEach(W=>N(t+1,{...E,[j]:W}))};return N(0,{}),O})(),k={};m.forEach(O=>{k[O]=0}),D(k)},[r]);const re=(l,m)=>G(k=>{const O=k[l]||[],N=O.includes(m)?O.filter(t=>t!==m):[...O,m];return{...k,[l]:N}}),x=l=>G(m=>({...m,[l]:[...p[l]||[]]})),z=l=>G(m=>({...m,[l]:[]})),K=(l,m)=>{const k=Math.max(0,Number(m)||0);B(O=>{const N=O[l];if(N===void 0)return O;if(k<N){const t={...O};return delete t[l],t}return O}),D(O=>({...O,[l]:k}))},I=ee(()=>{if(c.length===0)return[{key:X,sel:{}}];if(c.some(k=>(F[k]||[]).length===0))return[];const l=[],m=(k,O)=>{if(k===c.length){l.push({key:fe(O),sel:O});return}const N=c[k];(F[N]||[]).forEach(t=>m(k+1,{...O,[N]:t}))};return m(0,{}),l},[c,F]),q=()=>{let l=!1,m=!1;I.forEach(({key:k,sel:O})=>{const N=Number(y[k]||0);if(!(N>0))return;const t=Object.prototype.hasOwnProperty.call(b,k)?b[k]:Number(r.price)||0,E=v[k]!==void 0?v[k]:k===X?v[X]:void 0,j=S[k]||0,W=typeof E=="number"?Math.max(E-j,0):void 0,L=typeof W=="number"?Math.min(N,W):N;L>0?(e({id:r.id,name:r.name,sku:r.sku,price:t,qty:L,variants:O,inventoryKey:k}),l=!0,L<N&&(m=!0)):m=!0}),m&&alert("Some items were adjusted to match available stock."),l&&s()},H=ee(()=>I.reduce((l,{key:m})=>{const k=Number(y[m]||0);if(!Number.isFinite(k)||k<=0)return l;const O=Object.prototype.hasOwnProperty.call(b,m)?b[m]:Number(r.price)||0,N=v[m]!==void 0?v[m]:m===X?v[X]:void 0,t=S[m]||0,E=typeof N=="number"?Math.max(N-t,0):void 0,j=typeof E=="number"?Math.min(k,E):k;return j>0?l+j*O:l},0),[I,y,r.price,b,v,S]),se=I.every(({key:l})=>{const m=Number(y[l]||0);if(!(m>0))return!0;const k=v[l]!==void 0?v[l]:l===X?v[X]:void 0,O=S[l]||0,N=typeof k=="number"?Math.max(k-O,0):void 0;return!((typeof N=="number"?Math.min(m,N):m)>0)});return V(()=>{B(l=>{const m=new Set(I.map(({key:N})=>N));let k=!1;const O={};return Object.entries(l).forEach(([N,t])=>{m.has(N)?O[N]=t:k=!0}),k?O:l})},[I]),V(()=>{B({})},[r.id]),React.createElement("div",{role:"dialog","aria-modal":"true","aria-labelledby":`product-title-${r.id}`,className:"fixed inset-0 z-50 flex items-stretch sm:items-center justify-center bg-black/40 p-0 sm:p-6",onClick:s,onTouchMove:l=>{l.target===l.currentTarget&&l.preventDefault()},onWheel:l=>{l.target===l.currentTarget&&l.preventDefault()}},React.createElement("div",{ref:R,tabIndex:-1,className:"w-full h-full sm:h-auto sm:max-w-3xl rounded-none sm:rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain overflow-y-auto max-h-none sm:max-h-[90vh]",style:{touchAction:"pan-y"},onClick:l=>l.stopPropagation()},React.createElement("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("div",{className:"min-w-0"},React.createElement("h3",{id:`product-title-${r.id}`,className:"text-lg font-semibold text-slate-900 truncate"},r.name),React.createElement("p",{className:"mt-0.5 text-xs font-medium text-slate-500 truncate"},M.label)),React.createElement("button",{onClick:s,className:"rounded-full border border-transparent p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close"},React.createElement(Wt,{className:"h-5 w-5"}))),React.createElement("div",{className:"grid gap-6 p-5 lg:grid-cols-[minmax(0,1fr)_260px]"},React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-2xl border border-[var(--surface-border)] bg-slate-100"},React.createElement("img",{src:d[0],onError:l=>{l.currentTarget.src=we(r.name)},alt:`${r.name} \u2013 photo`,className:"h-full w-full object-cover"})),r.description&&React.createElement("p",{className:"text-sm text-slate-600"},r.description),(u.pairs.length>0||u.tags.length>0)&&React.createElement("section",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/80 p-4 text-sm shadow-sm backdrop-blur"},React.createElement("h4",{className:"text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Product information"),u.pairs.length>0&&React.createElement("dl",{className:"mt-3 grid grid-cols-1 gap-2"},u.pairs.map(({label:l,detail:m})=>React.createElement("div",{key:`${l}:${m}`,className:"flex items-baseline justify-between gap-3"},React.createElement("dt",{className:"text-xs font-semibold uppercase tracking-[0.16em] text-slate-500"},l),React.createElement("dd",{className:"text-sm font-semibold text-slate-900"},m)))),u.tags.length>0&&React.createElement("div",{className:"mt-3 flex flex-wrap gap-1.5 text-[11px]"},u.tags.map(l=>React.createElement("span",{key:l,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 font-medium text-slate-600"},l)))),c.map(l=>{const m=p[l]||[],k=F[l]||[],O=l.toLowerCase().includes("color")||l==="Color";return React.createElement("div",{key:l,className:"rounded-2xl border border-[var(--surface-border)] bg-white/80 p-4 text-sm shadow-sm backdrop-blur"},React.createElement("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-900"},l),m.length?React.createElement("div",{className:"flex items-center gap-2 text-xs text-slate-500"},React.createElement("button",{type:"button",onClick:()=>x(l),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:()=>z(l),className:"rounded-full border border-[var(--surface-border)] px-2 py-1 font-medium hover:bg-white/60"},"Clear")):null),React.createElement("div",{className:"max-h-32 overflow-auto rounded-xl border border-[var(--surface-border)] bg-white/70 p-2"},React.createElement("div",{className:"flex flex-wrap gap-2 text-xs"},m.length===0?React.createElement("p",{className:"text-slate-500"},"No options"):m.map(N=>{const t=k.includes(N);return React.createElement("button",{type:"button",key:N,onClick:()=>re(l,N),className:te("inline-flex items-center gap-1 rounded-full border px-3 py-1 font-medium transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",t?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},O?React.createElement(Me,{name:N}):null,N)}))))}),React.createElement("div",{className:"space-y-3","aria-label":"Quantities"},I.length===0?React.createElement("p",{className:"text-xs text-slate-500"},"Select at least one option."):React.createElement("div",{className:"max-h-80 overflow-y-auto space-y-3 pr-1"},I.map(({key:l,sel:m})=>{const k=Object.prototype.hasOwnProperty.call(b,l)?b[l]:Number(r.price)||0,O=Number(y[l]||0),N=v[l]!==void 0?v[l]:l===X?v[X]:void 0,t=S[l]||0,E=typeof N=="number"?Math.max(N-t,0):void 0,j=typeof E=="number"&&E<=0,W=_[l];return React.createElement("div",{key:l,className:te("rounded-2xl border px-3 py-3 text-sm shadow-sm backdrop-blur sm:flex sm:items-center sm:justify-between",j?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/85 text-slate-700")},React.createElement("div",{className:"space-y-1 text-sm"},Object.entries(m).map(([L,T],Z)=>React.createElement("span",{key:`${L}-${T}`},Z>0?" \xB7 ":"",L==="Color"?React.createElement("span",{className:"inline-flex items-center gap-1"},React.createElement(Me,{name:T}),T):React.createElement("span",{className:"font-medium text-slate-900"},T))),Object.keys(m).length===0&&React.createElement("span",{className:"font-medium text-slate-900"},"Quantity"),React.createElement("p",{className:"text-xs text-slate-500"},"Unit: ",React.createElement("span",{className:"font-semibold text-slate-900"},oe(k)),O>0?React.createElement(React.Fragment,null," \xB7 Total: ",React.createElement("span",{className:"font-semibold text-slate-900"},oe(k*O))):null),typeof N=="number"?React.createElement("p",{className:"text-xs text-slate-500"},`Remaining: ${Math.max(N-t,0)}${t>0?` (of ${N})`:""}`):React.createElement("p",{className:"text-xs text-slate-500"},"No stock limit")),React.createElement("div",{className:"mt-2 sm:mt-0"},React.createElement(Tt,{value:Number(y[l]||0),onChange:L=>K(l,L),min:0,max:typeof E=="number"?E:void 0,onLimit:L=>{typeof L=="number"&&Number.isFinite(L)&&B(T=>({...T,[l]:L}))}})),W!==void 0?React.createElement("p",{className:"mt-2 text-xs font-medium text-rose-600 sm:ml-3 sm:mt-0 sm:text-right"},`Only ${W} available for this selection.`):null)})))),React.createElement("aside",{className:"glass-card rounded-3xl space-y-5 p-5"},React.createElement("div",{className:"space-y-2 text-sm"},(()=>{const l=Number(r.price)||0,m=Object.values(b),k=m.length?Math.min(l,...m):l,O=m.length?Math.max(l,...m):l,N=k===O?oe(k):`${oe(k)}\u2013${oe(O)}`,t=m.length?"Price range":"Unit price";return React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,t),React.createElement("span",{className:"font-semibold text-slate-900"},N))})(),React.createElement("div",{className:"flex items-center justify-between text-slate-500"},React.createElement("span",null,"Selections"),React.createElement("span",{className:"font-medium text-slate-800"},I.length))),React.createElement("div",{className:"flex items-center justify-between rounded-2xl border border-[rgba(37,99,235,0.28)] bg-[rgba(37,99,235,0.12)] px-4 py-3 text-sm font-medium text-brand"},React.createElement("span",{className:"uppercase tracking-[0.18em]"},"Line total"),React.createElement("span",{className:"text-base font-semibold text-brand"},oe(H))),React.createElement("p",{className:"text-xs text-slate-500"},"Add items to the cart and send the final list to WhatsApp when you are ready."),React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("button",{disabled:se,onClick:q,className:te("w-full rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",se?"pointer-events-none opacity-50":"hover:bg-brand-muted")},"Add to cart"),React.createElement("button",{onClick:s,className:"w-full rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Cancel"))))))}function Tt({id:a,value:s,onChange:e,min:o=0,max:r,onLimit:h}){const v=d=>{typeof r=="number"&&Number.isFinite(r)&&typeof h=="function"&&d>r&&h(r)},b=(d,p)=>{v(typeof p=="number"?p:d);let c=Math.max(o,d);return typeof r=="number"&&Number.isFinite(r)&&(c=Math.min(r,c)),c},S=Number(s)||0,R=typeof r=="number"&&Number.isFinite(r)&&S>=r;return React.createElement("div",{className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/70 shadow-sm backdrop-blur",role:"group","aria-label":"Quantity"},React.createElement("button",{onClick:()=>e(b((Number(s)||0)-1,(Number(s)||0)-1)),className:"rounded-l-full px-3 py-1.5 text-slate-700 transition hover:bg-brand-soft focus:outline-none focus-visible:outline-2 focus-visible:outline-brand touch-manipulation select-none","aria-label":"Decrease quantity"},"\u2212"),React.createElement("input",{id:a,inputMode:"numeric",pattern:"[0-9]*",value:String(s),onChange:d=>{const p=Number(d.target.value.replace(/[^0-9]/g,"")),c=Number.isFinite(p)?p:o;e(Number.isFinite(p)?b(c,c):o)},className:"w-14 appearance-none border-x border-[var(--surface-border)] bg-transparent px-2 py-1.5 text-center text-base sm:text-sm text-slate-900 focus:outline-none"}),React.createElement("button",{onClick:()=>e(b((Number(s)||0)+1,(Number(s)||0)+1)),className:te("rounded-r-full px-3 py-1.5 touch-manipulation select-none transition focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",R?"cursor-not-allowed text-slate-300":"text-slate-700 hover:bg-brand-soft"),"aria-label":"Increase quantity",disabled:R},"+"))}async function Ha(a){var s;try{if((s=navigator.clipboard)!=null&&s.writeText)return await navigator.clipboard.writeText(a),!0}catch(e){}try{const e=document.createElement("textarea");return e.value=a,e.setAttribute("readonly",""),e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),!0}catch(e){return!1}}function Ya({open:a,onClose:s,cart:e,productLookup:o}){const r=ge(null);Je(a,r,s);const h=Ma(),v=ee(()=>Va(e.items,e.subtotal,e.notes),[e.items,e.subtotal,e.notes]),b=e.items.some(u=>Number(u.qty)>0),S=`https://wa.me/${Ue}?text=${encodeURIComponent(v)}`,R=`whatsapp://send?phone=${Ue}&text=${encodeURIComponent(v)}`,d=/Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent),[p,c]=P({});return V(()=>{c(u=>{const M=new Set((e.items||[]).map(y=>{if(!y)return null;const D=y.inventoryKey||fe(y.variants||{});return`${y.id||""}::${D}`}).filter(Boolean));let F=!1;const G={};return Object.entries(u).forEach(([y,D])=>{M.has(y)?G[y]=D:F=!0}),F?G:u})},[e.items]),React.createElement("div",{"aria-live":"polite"},React.createElement("div",{className:te("fixed inset-0 z-40 bg-black/40 transition-opacity",a?"opacity-100":"pointer-events-none opacity-0"),onClick:s,onTouchMove:u=>{u.preventDefault()},onTouchStart:u=>{u.preventDefault()},onWheel:u=>{u.preventDefault()},"aria-hidden":"true"}),React.createElement("aside",{role:"dialog","aria-modal":"true","aria-labelledby":"cart-title",className:te("fixed right-0 top-0 z-50 h-full w-full max-w-md transform border-l border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none overscroll-contain",h?"transition-none":"transition-transform duration-200 ease-out",a?"translate-x-0":"translate-x-full")},React.createElement("div",{ref:r,className:"flex h-full flex-col"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{id:"cart-title",className:"text-lg font-semibold text-slate-900"},"Your cart"),React.createElement("button",{onClick:s,className:"rounded-full p-2 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Close cart"},React.createElement(Wt,{className:"h-5 w-5"}))),React.createElement("div",{className:"flex-1 overflow-y-auto p-4",style:{touchAction:"pan-y"}},e.items.length===0?React.createElement("p",{className:"text-sm text-slate-500"},"Your cart is empty."):React.createElement("ul",{className:"space-y-3"},e.items.map((u,M)=>{const F=o&&typeof o.get=="function"?o.get(u.id):void 0,G=F?xe(F.inventory):{},y=u.inventoryKey||fe(u.variants||{}),D=G[y]!==void 0?G[y]:y===X?G[X]:void 0;let _=0;e.items.forEach((I,q)=>{if(q===M||!I||I.id!==u.id)return;(I.inventoryKey||fe(I.variants||{}))===y&&(_+=Number(I.qty||0))});const B=typeof D=="number"?Math.max(D-_,0):void 0,re=typeof B=="number"&&u.qty>B,x=typeof B=="number"?`Available: ${B}`:null,z=`${u.id||""}::${y}`,K=p[z];return React.createElement("li",{key:M,className:te("rounded-2xl border p-3 shadow-sm backdrop-blur transition",re?"border-rose-200 bg-rose-50/80 text-rose-700":"border-[var(--surface-border)] bg-white/80 text-slate-700")},React.createElement("div",{className:"flex items-start justify-between gap-3"},React.createElement("div",null,React.createElement("p",{className:"font-semibold text-slate-900"},u.name),React.createElement("p",{className:"text-xs text-slate-500"},"SKU: ",u.sku),u.variants&&Object.keys(u.variants).length>0&&React.createElement("div",{className:"mt-1 flex flex-wrap gap-1.5"},Object.entries(u.variants).map(([I,q])=>React.createElement("span",{key:I,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white/80 px-2 py-0.5 text-xs font-medium text-slate-600"},I==="Color"?React.createElement(React.Fragment,null,React.createElement(Me,{name:q}),`${I}: ${q}`):`${I}: ${q}`))),x&&React.createElement("p",{className:"mt-1 text-xs text-slate-500"},x),K!==void 0?React.createElement("p",{className:"mt-1 text-xs font-medium text-rose-600"},`Only ${K} available for this selection.`):null),React.createElement("button",{onClick:()=>e.removeIndex(M),className:"rounded-full p-1.5 text-slate-500 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":`Remove ${u.name}`},React.createElement($a,{className:"h-4 w-4 text-slate-500"}))),React.createElement("div",{className:"mt-2 flex items-center justify-between"},React.createElement(Tt,{value:u.qty,onChange:I=>{const q=typeof B=="number"?Math.min(I,B):I;e.updateQty(M,q),c(H=>{const se=H[z];if(se===void 0)return H;if(q<se){const l={...H};return delete l[z],l}return H})},min:0,max:typeof B=="number"?B:void 0,onLimit:I=>{typeof I=="number"&&Number.isFinite(I)&&c(q=>({...q,[z]:I}))}}),React.createElement("div",{className:"text-sm text-slate-600"},oe(u.price)," \xD7 ",u.qty," = ",React.createElement("span",{className:"font-semibold text-slate-900"},oe(u.price*u.qty)))))}))),React.createElement("div",{className:"border-t border-[var(--surface-border)] bg-white/60 p-4 backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between text-sm text-slate-600"},React.createElement("span",null,"Subtotal"),React.createElement("span",{className:"font-semibold text-slate-900"},oe(e.subtotal))),React.createElement("label",{className:"mt-3 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Notes"),React.createElement("textarea",{value:e.notes,onChange:u=>e.setNotes(u.target.value),rows:2,className:"w-full resize-none rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",placeholder:"Delivery preferences, color mix, etc."})),React.createElement("div",{className:"mt-3 flex gap-3"},React.createElement("button",{onClick:e.clear,className:"flex-1 rounded-full border border-[var(--surface-border)] bg-white/70 px-4 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Clear cart"),React.createElement("button",{type:"button",onClick:async()=>{if(!b){alert("Add at least one product before sending an order.");return}if(e.items.filter((y,D)=>{const _=o&&typeof o.get=="function"?o.get(y.id):void 0,B=_?xe(_.inventory):{},re=y.inventoryKey||fe(y.variants||{}),x=B[re]!==void 0?B[re]:re===X?B[X]:void 0;if(typeof x!="number")return!1;let z=0;e.items.forEach((I,q)=>{if(q===D||!I||I.id!==y.id)return;(I.inventoryKey||fe(I.variants||{}))===re&&(z+=Number(I.qty||0))});const K=Math.max(x-z,0);return y.qty>K}).length>0){alert("One or more items exceed available stock. Please adjust the quantities before sending the order.");return}try{await De("createOrder",{currency:Rt,subtotal_cents:Math.round(e.subtotal*100),notes:e.notes||"",items:e.items.map((y,D)=>({product_id:y.id,sku:y.sku,name:y.name,quantity:Number(y.qty)||0,unit_price_cents:Math.round(Number(y.price||0)*100),subtotal_cents:Math.round(Number(y.price||0)*Number(y.qty||0)*100),variants:y.variants||{},inventory_key:y.inventoryKey||fe(y.variants||{})}))})}catch(y){console.error("Failed to record order",y)}try{await Ha(v),alert("\u2705 Your list is copied! If WhatsApp doesn't open, you can paste it manually.")}catch(y){alert("\u{1F4CB} Please copy your order manually if WhatsApp doesn't open automatically.")}let M=!1;const F=()=>{M||(M=!0,e.clear(),e.setNotes(""))},G=()=>F();if(window.addEventListener("pagehide",G,{once:!0}),document.addEventListener("visibilitychange",function y(){document.hidden&&(F(),document.removeEventListener("visibilitychange",y))},{once:!0}),d)F(),window.location.href=R,setTimeout(()=>{try{window.open(S,"_blank","noopener,noreferrer")}catch(y){}},800);else{const y=window.open(S,"_blank","noopener,noreferrer");setTimeout(F,500)}},className:te("flex-1 inline-flex items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",b?"bg-brand hover:bg-brand-muted":"pointer-events-none bg-[rgba(37,99,235,0.28)] text-white/70")},"Send via WhatsApp",React.createElement(Lt,{className:"h-4 w-4 text-white"})))))))}function Va(a,s,e){const o=(a||[]).filter(h=>Number(h.qty)>0);let r=`\u{1F6D2} *Order Request*

`;return o.forEach(h=>{r+=`\u2022 ${h.name} (SKU: ${h.sku})
`,h.variants&&Object.keys(h.variants).length>0&&(r+=`  Variants: ${Object.entries(h.variants).map(([v,b])=>`${v}: ${b}`).join(", ")}
`),r+=`  Qty: ${h.qty} \xD7 ${oe(h.price)} = ${oe(h.price*h.qty)}

`}),r+=`*Subtotal: ${oe(s)}*

`,(e||"").trim()&&(r+=`*Notes:* ${e.trim()}

`),r+="Please confirm availability and pricing. Thank you!",r}function Qa({addProduct:a,products:s,removeProduct:e,onNotify:o}){const[r,h]=P("Phone Screens"),[v,b]=P("");V(()=>{b(t=>{const E=new Set(Oe),j=(t||"").trim(),W=E.has(j.replace(" \u2014",""))||j.endsWith(" \u2014");return!j||W?`${r} \u2014 `:t})},[r]);const[S,R]=P(""),[d,p]=P(""),[c,u]=P(""),[M,F]=P([]),[G,y]=P([]),[D,_]=P(null),[B,re]=P(!1),[x,z]=P({}),K=(t,E)=>{y([]),_(null),z(j=>({...j,[t]:E}))},I=(t,E)=>z(j=>{y([]),_(null);const W=Array.isArray(j[t])?j[t]:[];return{...j,[t]:W.includes(E)?W.filter(L=>L!==E):[...W,E]}});function q(t){y([]),_(null);const E=Array.from(t.target.files||[]);if(!E.length)return;const j=E.map(W=>new Promise(L=>{const T=new FileReader;T.onload=()=>L(String(T.result||"")),T.readAsDataURL(W)}));Promise.all(j).then(W=>F(L=>[...L,...W]))}const H=t=>Array.isArray(t)&&t.length?t[0]:t!=null?t:"",se={"Phone Screens":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"display",label:"Display type/quality",type:"select",options:["OLED \u2013 OEM","OLED \u2013 AAA","LCD \u2013 OEM","LCD \u2013 AAA"]},{key:"frame",label:"Frame",type:"select",options:["With frame","Without frame"]}],also:[{key:"frontColor",label:"Front color",type:"select",options:["Black","White"]},{key:"retention",label:"True Tone/Face ID retention",type:"checkbox"}],optional:[{key:"adhesive",label:"Pre-installed adhesive / waterproof gasket",type:"checkbox"}],name:t=>`Screen \u2014 ${H(t.models)} ${t.display?`${String(t.display).split(" ")[0]}`:""}`.trim(),specs:t=>[t.display,t.frame,t.frontColor].filter(Boolean)},"Back Glass":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"colors",label:"Colors / finish",type:"multiselect",options:Pe}],also:[{key:"adhesive",label:"Adhesive pre-installed",type:"checkbox"},{key:"rings",label:"With camera rings",type:"checkbox"}],optional:[{key:"grade",label:"Quality grade",type:"select",options:gt}],name:t=>`Back Glass \u2014 ${H(t.models)}`.trim(),specs:t=>[H(t.colors)||null,t.grade,t.adhesive?"Adhesive":null,t.rings?"Camera rings":null].filter(Boolean)},"Power Banks":{must:[{key:"capacity",label:"Capacity",type:"select",options:Oa},{key:"ports",label:"Output ports",type:"select",options:yt}],also:[{key:"standard",label:"Standard",type:"select",options:Ee}],optional:[{key:"colour",label:"Colour",type:"select",options:Pe}],name:t=>`Power bank \u2014 ${t.capacity||""}`.trim(),specs:t=>[t.capacity,t.ports,t.standard].filter(Boolean)},"Screen Protectors":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:ha},{key:"pack",label:"Pack",type:"select",options:xa}],also:[{key:"finish",label:"Finish",type:"select",options:ya},{key:"coverage",label:"Coverage",type:"select",options:va}],optional:[],name:t=>`Protector \u2014 ${H(t.models)} ${t.material?`(${t.material})`:""}`.trim(),specs:t=>[t.material,t.finish,t.coverage].filter(Boolean)},Batteries:{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"grade",label:"Grade",type:"select",options:gt}],also:[],optional:[{key:"capacity",label:"Capacity (mAh)",type:"text",placeholder:"e.g. 3000"}],name:t=>`Battery \u2014 ${H(t.models)}`.trim(),specs:t=>[t.grade,t.capacity].filter(Boolean)},"Mobile Phones":{must:[{key:"model",label:"Model",type:"text",placeholder:"e.g., iPhone 13"},{key:"cond",label:"Condition/grade",type:"select",options:xt},{key:"sim",label:"SIM",type:"select",options:Aa}],also:[{key:"connect",label:"Connectivity",type:"select",options:Sa},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:vt},{key:"ram",label:"RAM",type:"multiselect",options:wt},{key:"color",label:"Color",type:"text"},{key:"inbox",label:"Accessories in box",type:"text",placeholder:"Cable, charger"}],name:t=>`${t.model||""} ${t.cond||""}`.trim(),specs:t=>[Array.isArray(t.storage)&&t.storage[0]||null,Array.isArray(t.ram)&&t.ram[0]||null,t.cond,t.sim,t.connect].filter(Boolean)},Tablets:{must:[{key:"model",label:"Model",type:"text",placeholder:"iPad 10th Gen"},{key:"conn",label:"Connectivity",type:"select",options:Ca}],also:[{key:"screen",label:"Screen size",type:"text",placeholder:'10.9"'},{key:"warranty",label:"Warranty (months)",type:"number"}],optional:[{key:"storage",label:"Storage",type:"multiselect",options:vt},{key:"ram",label:"RAM",type:"multiselect",options:wt},{key:"cond",label:"Condition/grade",type:"select",options:xt},{key:"color",label:"Color",type:"text"},{key:"compat",label:"Pencil/keyboard compatibility",type:"text"}],name:t=>`${t.model||""} ${t.conn||""}`.trim(),specs:t=>[Array.isArray(t.storage)&&t.storage[0]||null,Array.isArray(t.ram)&&t.ram[0]||null,t.conn,t.screen,t.cond].filter(Boolean)},"Phone Cases":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"material",label:"Material",type:"select",options:ga}],also:[{key:"color",label:"Color",type:"multiselect",options:Pe}],optional:[{key:"pattern",label:"Pattern / style",type:"text"}],name:t=>`Case \u2014 ${H(t.models)} ${t.material?`(${t.material})`:""}`.trim(),specs:t=>[t.material,H(t.color)||null].filter(Boolean)},Cables:{must:[{key:"connector",label:"Connector",type:"select",options:ht},{key:"length",label:"Length",type:"select",options:jt}],also:[{key:"rating",label:"Power rating",type:"select",options:wa},{key:"durability",label:"Durability",type:"select",options:Ea}],optional:[{key:"cert",label:"Certs",type:"select",options:Na}],name:t=>`Cable \u2014 ${t.connector||""} ${t.length?`(${t.length})`:""}`.trim(),specs:t=>[t.connector,t.length,t.rating].filter(Boolean)},Chargers:{must:[{key:"wattage",label:"Wattage",type:"select",options:Ra||["20W","30W","45W","65W"]},{key:"ports",label:"Ports",type:"select",options:yt}],also:[{key:"standard",label:"Standard",type:"select",options:Ee},{key:"plug",label:"Plug type",type:"select",options:ka}],optional:[],name:t=>`Charger \u2014 ${t.wattage||""}`.trim(),specs:t=>[t.wattage,t.ports].filter(Boolean)},Earphones:{must:[{key:"type",label:"Type",type:"select",options:["Wired","TWS"]}],also:[{key:"connector",label:"Connector / Standard",type:"select",options:[...ht,...Ee]}],optional:[{key:"color",label:"Color",type:"select",options:Pe}],name:t=>`Earphones \u2014 ${t.type||""}`.trim(),specs:t=>[t.type,t.connector].filter(Boolean)},"Charging Ports":{must:[{key:"models",label:"Phone models",type:"phoneModels"},{key:"type",label:"Port type",type:"select",options:["USB-C","Lightning","Micro-USB"]}],also:[],optional:[{key:"solderRequired",label:"Solder required",type:"checkbox"}],name:t=>`Charging port \u2014 ${H(t.models)}`.trim(),specs:t=>[t.type,t.solderRequired?"Solder":null].filter(Boolean)},"Face ID":{must:[{key:"models",label:"Phone models",type:"phoneModels",allowedBrands:["iPhone"]},{key:"service",label:"Service",type:"select",options:["Repair","Replace","Calibration"]}],also:[],optional:[],name:t=>`Face ID \u2014 ${H(t.models)}`.trim(),specs:t=>[t.service].filter(Boolean)}};V(()=>{const t=se[r]||{must:[],also:[],optional:[]},E={},j=W=>W.forEach(L=>{L.type==="select"&&(E[L.key]=""),L.type==="number"&&(E[L.key]=""),L.type==="text"&&(E[L.key]=""),L.type==="checkbox"&&(E[L.key]=!1),L.type==="multiselect"&&(E[L.key]=[])});j(t.must),j(t.also),j(t.optional),z(E)},[r]);const l=({f:t})=>{var W,L;if(!t)return null;const E="mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500",j="w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand";if(t.type==="select")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:E},t.label),React.createElement("select",{value:(W=x[t.key])!=null?W:"",onChange:T=>K(t.key,T.target.value),className:j},(t.options||[]).map(T=>React.createElement("option",{key:T,value:T},T))));if(t.type==="text"||t.type==="number")return React.createElement("label",{className:"block text-sm text-slate-600 space-y-1"},React.createElement("span",{className:E},t.label),React.createElement("input",{type:t.type,value:(L=x[t.key])!=null?L:"",onChange:T=>K(t.key,t.type==="number"?T.target.value.replace(/[^0-9.]/g,""):T.target.value),placeholder:t.placeholder||"",className:j}));if(t.type==="checkbox")return React.createElement("label",{className:"inline-flex items-center gap-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3 py-2 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("input",{type:"checkbox",checked:!!x[t.key],onChange:T=>K(t.key,T.target.checked),className:"h-4 w-4 rounded border-[var(--surface-border)] text-brand focus:ring-brand"}),React.createElement("span",null,t.label));if(t.type==="multiselect"){const T=t.options||[],Z=Array.isArray(x[t.key])?x[t.key]:[];return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},t.label),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:()=>K(t.key,T),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>K(t.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},T.map(ne=>{const de=Z.includes(ne),Y=Qe[ne]!==void 0||/color/i.test(t.label);return React.createElement("button",{type:"button",key:ne,onClick:()=>I(t.key,ne),className:te("inline-flex items-center gap-1 rounded-full border px-2.5 py-1 font-medium transition",de?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},Y?React.createElement(React.Fragment,null,React.createElement(Me,{name:ne}),ne):ne)})))}if(t.type==="phoneModels"){const T=`${t.key}Brand`,Z=x[T]||(t.allowedBrands?t.allowedBrands[0]:"iPhone"),ne=ba[Z]||[],de=Array.isArray(x[t.key])?x[t.key]:[],Y=f=>{K(T,f),K(t.key,[])};return React.createElement("div",{className:"space-y-3 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},(t.allowedBrands||ua).map(f=>React.createElement("button",{type:"button",key:f,onClick:()=>Y(f),className:te("rounded-full border px-2.5 py-1 font-medium transition",(x[`${t.key}Brand`]||(t.allowedBrands?t.allowedBrands[0]:"iPhone"))===f?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},f))),React.createElement("div",{className:"flex items-center justify-between text-xs text-slate-500"},React.createElement("span",{className:"font-semibold text-slate-800"},`${Z} models`),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{type:"button",onClick:()=>K(t.key,ne),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Select all"},"All"),React.createElement("button",{type:"button",onClick:()=>K(t.key,[]),className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium hover:bg-white/60",title:"Clear"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},ne.map(f=>{const A=de.includes(f);return React.createElement("button",{type:"button",key:f,onClick:()=>{const $=Array.isArray(x[t.key])?x[t.key]:[];K(t.key,A?$.filter(Q=>Q!==f):[...$,f])},className:te("rounded-full border px-2.5 py-1 font-medium transition",A?"border-transparent bg-brand text-white shadow-sm":"border-[var(--surface-border)] bg-white/80 text-slate-700 hover:text-slate-900 hover:bg-white")},f)})))}return null},m=()=>{const t=se[r]||{must:[],also:[],optional:[],name:null,specs:null},E=t.name&&t.name(x)||`${r} item`,j=v.trim()||E,W={},L=(Y,f)=>{if(f==="models")return"Model";const A=String(Y).toLowerCase().trim();return A==="color"||A==="colors"||A==="colour"?"Color":Y.trim()},T=(Y,f,A)=>{if(A==null||A===""||Array.isArray(A)&&A.length===0)return;const $=L(Y,f);W[$]=Array.isArray(A)?A:[String(A)]};[...t.must||[],...t.also||[],...t.optional||[]].forEach(Y=>{const f=x[Y.key];Y.type==="checkbox"?f&&T(Y.label,Y.key,"Yes"):T(Y.label,Y.key,f)}),x.modelsBrand&&T("Phone","modelsBrand",x.modelsBrand),Object.keys(W).forEach(Y=>{const f=Array.isArray(W[Y])?W[Y].map(A=>String(A).trim()).filter(Boolean):[];f.length?W[Y]=Array.from(new Set(f)):delete W[Y]});const Z=(t.specs&&t.specs(x)||[]).filter(Boolean).slice(0,6),ne=Array.from(new Set((M||[]).filter(Boolean))),de={id:`owner-${Date.now()}`,name:j,sku:S.trim()||`SKU-${(Math.random()*1e6|0).toString(36)}`,category:r,price:Number(d)||0,description:c.trim(),image:ne[0]||void 0,images:ne.length?ne:void 0,specs:Z,variants:W};return ie(de)},k=()=>{var T;const t=[],E=se[r]||{must:[]},j=Number(d);(!Number.isFinite(j)||j<=0)&&t.push("Price must be greater than 0");const W=(E.must||[]).find(Z=>Z.type==="phoneModels");if(W){const Z=x[W.key];(!Array.isArray(Z)||Z.length===0)&&t.push("Please select at least one model")}const L=(E.must||[]).find(Z=>Z.key==="model");return L&&(String((T=x[L.key])!=null?T:"").trim()||t.push("Model is required")),t},O=async()=>{const t=k();if(t.length){y(t),_(null);return}const E=m();if(E){re(!0);try{const j=await a(E),W=!!(j&&j.persisted);y([]),W?_({type:"success",message:"Product added to catalogue."}):(_({type:"warning",message:"Product saved locally. Supabase sync pending."}),o==null||o("warning","Supabase connection unavailable. Product stored locally until sync succeeds.")),b(`${r} \u2014 `),R(""),p(""),u(""),F([]),z({})}catch(j){console.error("Failed to add product:",j),_({type:"error",message:"Could not save product. Check your connection and try again."}),o==null||o("error","Could not add product. Check your connection and try again.")}finally{re(!1)}}},N=se[r]||{must:[],also:[],optional:[]};return React.createElement("section",{"aria-labelledby":"owner-title",className:"mx-auto max-w-6xl px-4 sm:px-6 lg:px-8 py-8"},React.createElement("div",{className:"glass-card space-y-6 rounded-3xl p-6 sm:p-8"},React.createElement("div",{className:"space-y-2"},React.createElement("h2",{id:"owner-title",className:"text-2xl font-semibold text-slate-900"},"Owner \u2014 Add products"),React.createElement("p",{className:"text-sm text-slate-600"},"Only essentials. Fields shift by category. Keep data clean; the catalogue updates instantly.")),D&&React.createElement("div",{className:te("rounded-2xl border px-4 py-3 text-sm shadow-sm",D.type==="error"?"border-rose-200 bg-rose-50/80 text-rose-700":D.type==="warning"?"border-amber-200 bg-amber-50/80 text-amber-700":"border-emerald-200 bg-emerald-50/80 text-emerald-700")},D.message),G.length>0&&React.createElement("div",{className:"rounded-2xl border border-amber-200 bg-amber-50/80 px-4 py-3 text-sm text-amber-700 shadow-sm"},React.createElement("p",{className:"font-semibold"},"Please fix the following:"),React.createElement("ul",{className:"mt-1 list-disc space-y-0.5 pl-4"},G.map((t,E)=>React.createElement("li",{key:E},t)))),React.createElement("div",{className:"space-y-4"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Essentials"),React.createElement("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2"},React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Category"),React.createElement("select",{value:r,onChange:t=>{y([]),_(null),h(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},Oe.filter(t=>t!=="All").map(t=>React.createElement("option",{key:t,value:t},t)))),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:d,onChange:t=>{y([]),_(null),p(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Name"),React.createElement("input",{value:v,onChange:t=>{y([]),_(null),b(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"SKU"),React.createElement("input",{value:S,onChange:t=>{y([]),_(null),R(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"md:col-span-2 block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Short description"),React.createElement("textarea",{rows:3,value:c,onChange:t=>{y([]),_(null),u(t.target.value)},className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm text-slate-600"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:q}),M.length>0&&React.createElement("div",{className:"mt-2 flex flex-wrap gap-2"},M.map((t,E)=>React.createElement("div",{key:E,className:"relative"},React.createElement("img",{src:t,alt:`preview ${E+1}`,className:"h-20 w-20 overflow-hidden rounded-xl border border-[var(--surface-border)] object-cover"}),React.createElement("button",{type:"button",onClick:()=>{y([]),_(null),F(j=>j.filter((W,L)=>L!==E))},className:"absolute -right-1 -top-1 rounded-full border border-[var(--surface-border)] bg-white px-1 text-xs shadow","aria-label":`Remove photo ${E+1}`},"\xD7"))))))),React.createElement("div",{className:"space-y-3"},React.createElement("h3",{className:"text-xs font-semibold uppercase tracking-[0.24em] text-slate-500"},"Variants & Specs"),React.createElement("div",{className:"grid gap-3 md:grid-cols-2"},[...N.must||[],...N.also||[],...N.optional||[]].map(t=>React.createElement(l,{key:t.key,f:t})))),React.createElement("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-end"},React.createElement("button",{type:"button",onClick:O,disabled:B,className:te("inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold text-white shadow-sm focus:outline-none focus-visible:outline-2 focus-visible:outline-brand",B?"bg-brand/50 cursor-not-allowed opacity-70":"bg-brand hover:bg-brand-muted")},B?"Saving...":"Add Product"),React.createElement("button",{type:"button",onClick:()=>{var t;return(t=window.__setOwnerManage)==null?void 0:t.call(window,!0)},className:"inline-flex items-center justify-center rounded-full border border-[var(--surface-border)] bg-white/70 px-6 py-2 text-sm font-semibold text-slate-800 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Manage catalogue"))))}function Ja({label:a,options:s,value:e,onChange:o}){const r=()=>o(s),h=()=>o([]),v=b=>o(e.includes(b)?e.filter(S=>S!==b):[...e,b]);return React.createElement("div",{className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/70 p-4 text-sm text-slate-600 shadow-sm backdrop-blur"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},a),React.createElement("div",{className:"flex items-center gap-2 text-xs"},React.createElement("button",{type:"button",onClick:r,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"All"),React.createElement("button",{type:"button",onClick:h,className:"rounded-full border border-[var(--surface-border)] px-2 py-0.5 font-medium text-slate-600 hover:bg-white/60"},"Clear"))),React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},s.map(b=>{const S=e.includes(b),R=/color/i.test(a)||Qe[b]!==void 0;return React.createElement("button",{type:"button",key:b,onClick:()=>v(b),className:te("rounded-full border px-2 py-1 text-xs",S?"border-transparent bg-brand text-white":"border-[var(--surface-border)] bg-white text-slate-700")},R?React.createElement(React.Fragment,null,React.createElement(Me,{name:b})," ",b):b)})))}function Xa({open:a,onClose:s,product:e,catalogConfig:o,onSave:r,onHide:h,onDelete:v}){var st,je,nt;const b=ge(null);Je(!!a,b,s);const S=()=>Math.random().toString(36).slice(2,10),R=n=>At(n).map(g=>{const w=String(g||"").trim(),C=w.indexOf(":");if(C>0){const U=w.slice(0,C).trim(),be=w.slice(C+1).trim();if(U&&be)return{id:S(),label:U,value:be}}return{id:S(),label:w,value:""}}).filter(g=>g.label),d=n=>String(n||"").split(/[\n,]/g).map(i=>String(i).trim()).filter(Boolean),p=n=>{if(!n||typeof n!="object"||Array.isArray(n))return{};const i={};return Object.entries(n).forEach(([g,w])=>{const C=String(g||"").trim();if(!C||C===X)return;const U=Number(w);Number.isFinite(U)&&U>=0&&(i[C]=U)}),i},[c,u]=P((e==null?void 0:e.name)||""),[M,F]=P((e==null?void 0:e.sku)||""),[G,y]=P((e==null?void 0:e.category)||"All"),[D,_]=P(ze(e)||""),[B,re]=P(String((st=e==null?void 0:e.price)!=null?st:0)),[x,z]=P((e==null?void 0:e.description)||""),[K,I]=P(()=>R(e==null?void 0:e.specs)),[q,H]=P(()=>[...Array.isArray(e==null?void 0:e.images)&&e.images.length?e.images:e!=null&&e.image?[e.image]:[]]),[se,l]=P(0),[m,k]=P(()=>{const n={...(e==null?void 0:e.variants)||{}};return n.Color&&!Array.isArray(n.Color)&&(n.Color=[n.Color]),n.Model&&!Array.isArray(n.Model)&&(n.Model=[n.Model]),n}),[O,N]=P({}),[t,E]=P(!1),[j,W]=P(""),[L,T]=P(""),[Z,ne]=P(()=>Object.keys(xe(e==null?void 0:e.inventory)).length>0),[de,Y]=P(()=>{const n=xe(e==null?void 0:e.inventory),i={};return Object.entries(n).forEach(([g,w])=>{i[String(g)]=String(Math.floor(Number(w)||0))}),i}),[f,A]=P(""),[$,Q]=P(()=>{var n;return Object.keys(p((n=e==null?void 0:e.variants)==null?void 0:n[Ne])).length>0}),[ce,le]=P(()=>{var g;const n=p((g=e==null?void 0:e.variants)==null?void 0:g[Ne]),i={};return Object.entries(n).forEach(([w,C])=>{i[String(w)]=String(C)}),i});V(()=>{var C,U;if(!a)return;u((e==null?void 0:e.name)||""),F((e==null?void 0:e.sku)||""),y((e==null?void 0:e.category)||"All"),_(ze(e)||""),re(String((C=e==null?void 0:e.price)!=null?C:0)),z((e==null?void 0:e.description)||""),I(R(e==null?void 0:e.specs));const n=Array.isArray(e==null?void 0:e.images)&&e.images.length?e.images:e!=null&&e.image?[e.image]:[];H([...n]),l(0);const i={...(e==null?void 0:e.variants)||{}};i.Color&&!Array.isArray(i.Color)&&(i.Color=[i.Color]),i.Model&&!Array.isArray(i.Model)&&(i.Model=[i.Model]),k(i),N({}),E(!1),W(""),T("");const g=xe(e==null?void 0:e.inventory);ne(Object.keys(g).length>0),Y(()=>{const be={};return Object.entries(g).forEach(([Ae,Se])=>{be[String(Ae)]=String(Math.floor(Number(Se)||0))}),be}),A("");const w=p((U=e==null?void 0:e.variants)==null?void 0:U[Ne]);Q(Object.keys(w).length>0),le(()=>{const be={};return Object.entries(w).forEach(([Ae,Se])=>{be[String(Ae)]=String(Se)}),be})},[a,e==null?void 0:e.id]);const me=n=>{const i=Array.from(n.target.files||[]);if(!i.length)return;const g=i.map(w=>new Promise(C=>{const U=new FileReader;U.onload=()=>C(String(U.result||"")),U.readAsDataURL(w)}));Promise.all(g).then(w=>H(C=>[...C,...w]))},_e=()=>l(n=>(n-1+q.length)%q.length),$t=()=>l(n=>(n+1)%q.length),Ft=ee(()=>{const n=Array.isArray(o==null?void 0:o.families)?o.families.map(w=>String((w==null?void 0:w.name)||"").trim()).filter(Boolean):[],i=n.length?n:["iPhone","Samsung S","Samsung A","Accessories"],g=String(D||"").trim();return g&&!i.includes(g)?[...i,g]:i},[o,D]),Dt=ee(()=>{const n=Array.isArray(o==null?void 0:o.categories)?o.categories.filter(Boolean):[],i=n.length?n:Oe.filter(C=>C!=="All"),g=String(G||"").trim(),w=["All",...i];return g&&g!=="All"&&!i.includes(g)?[...w,g]:w},[o,G]),Ut=ee(()=>{const n=String(D||"").trim(),g=(Array.isArray(o==null?void 0:o.families)?o.families:[]).find(U=>String((U==null?void 0:U.name)||"").trim()===n),w=Array.isArray(g==null?void 0:g.models)?g.models.map(U=>String(U).trim()).filter(Boolean):[];if(w.length)return w;const C=n.toLowerCase();return C.includes("iphone")?Re:C.includes("samsung s")?Te:C.includes("samsung a")?$e:[...Re,...Te,...$e]},[o,D]),ke=ee(()=>{const n={};return Object.entries(m||{}).forEach(([i,g])=>{!i||String(i).startsWith("__")||!Array.isArray(g)||g.length===0||(n[i]=g)}),n},[m]),Xe=ee(()=>{const n=Object.keys(ke),i=["Model","Color"];return n.sort((g,w)=>{const C=i.indexOf(g),U=i.indexOf(w);return C!==-1||U!==-1?(C===-1?99:C)-(U===-1?99:U):g.localeCompare(w)}),n},[ke]),ve=ee(()=>computeVariantCombos(ke),[ke]),Ze=ee(()=>new Set(ve.map(({key:n})=>n)),[ve]),et=n=>{const i=Object.entries(n||{}).filter(([g,w])=>w!=null&&String(w).trim()!=="").sort(([g],[w])=>g.localeCompare(w));return i.length?i.map(([g,w])=>`${g}: ${w}`).join(" \u2022 "):"Base product"},ar=Array.from(new Set([...Array.isArray(m.Model)?m.Model:[]])),rr=Array.from(new Set([...Array.isArray(m.Color)?m.Color:[]])),sr=n=>{H(i=>{if(n<=0||n>=i.length)return i;const g=[...i],[w]=g.splice(n,1);return g.unshift(w),g}),l(0)},Gt=n=>{H(i=>i.filter((g,w)=>w!==n)),l(i=>i===n?0:i>n?i-1:i)},tt=(n,i,g)=>{I(w=>w.map(C=>C.id===n?{...C,[i]:g}:C))},Kt=()=>I(n=>[...n,{id:S(),label:"",value:""}]),zt=n=>I(i=>i.filter(g=>g.id!==n)),Ie=(n,i)=>{const g=String(n||"").trim();if(!g||g.startsWith("__"))return;const w=Array.from(new Set((Array.isArray(i)?i:[]).map(C=>String(C).trim()).filter(Boolean)));k(C=>{const U={...C||{}};return w.length?U[g]=w:delete U[g],U})},qt=n=>{const i=String(n||"").trim();i&&(k(g=>{const w={...g||{}};return delete w[i],w}),N(g=>{const w={...g||{}};return delete w[i],w}))},at=n=>{const i=String(n||"").trim();if(!i)return;const g=d(O[i]||"");if(!g.length)return;const w=Array.isArray(m==null?void 0:m[i])?m[i]:[];Ie(i,[...w,...g]),N(C=>({...C||{},[i]:""}))},Ht=()=>{const n=String(j||"").trim();if(!n||n.startsWith("__"))return;const i=d(L);i.length&&(Ie(n,i),W(""),T(""),E(!1))},Yt=()=>{const n=String(f||"").trim();if(!n)return;const i=Number(n);if(!Number.isFinite(i)||i<0)return;const g=String(Math.floor(i));Y(w=>{const C={...w||{}};return ve.forEach(({key:U})=>{C[U]=g}),C})},Vt=()=>{Y(n=>{const i={...n||{}};return ve.forEach(({key:g})=>{i[g]=""}),i})},Qt=()=>{le(n=>{const i={...n||{}};return ve.forEach(({key:g})=>{g!==X&&(i[g]="")}),i})},Jt=()=>{const n=c.trim()||e.name,i=M.trim()||e.sku,g=Number(B),w=Number.isFinite(g)&&g>=0?g:Number(e.price)||0,C=String(G||e.category||"").trim()||"All",U=String(D||"").trim(),be=(Array.isArray(e==null?void 0:e.specs)?e.specs:[]).filter(J=>{const ae=String(J||"");return ae&&ae.startsWith(kt)&&!ae.startsWith(Le)}).map(J=>String(J)),Ae=K.map(J=>{const ae=String((J==null?void 0:J.label)||"").trim();if(!ae)return null;const ue=String((J==null?void 0:J.value)||"").trim();return ue?`${ae}: ${ue}`:ae}).filter(Boolean),Se=Array.from(new Set([...U?[`${Le}${U}`]:[],...be,...Ae])),ot={};e!=null&&e.variants&&typeof e.variants=="object"&&!Array.isArray(e.variants)&&Object.entries(e.variants).forEach(([J,ae])=>{!J||J===Ne||Array.isArray(ae)||String(J).startsWith("__")&&(ot[J]=ae)});const lt={};Object.entries(ke||{}).forEach(([J,ae])=>{const ue=String(J||"").trim();if(!ue)return;const he=Array.from(new Set((Array.isArray(ae)?ae:[]).map(pe=>String(pe).trim()).filter(Boolean)));he.length&&(lt[ue]=he)});const it={...ot,...lt};if($){const J=w,ae={};Object.entries(ce||{}).forEach(([ue,he])=>{const pe=String(ue||"").trim();if(!pe||pe===X||!Ze.has(pe))return;const dt=String(he!=null?he:"").trim();if(!dt)return;const We=Number(dt);!Number.isFinite(We)||We<0||Math.abs(We-J)<1e-9||(ae[pe]=We)}),Object.keys(ae).length&&(it[Ne]=ae)}const ct={};Z&&Object.entries(de||{}).forEach(([J,ae])=>{const ue=String(J||"").trim();if(!ue||!Ze.has(ue))return;const he=String(ae!=null?ae:"").trim();if(!he)return;const pe=Number(he);!Number.isFinite(pe)||pe<0||(ct[ue]=Math.floor(pe))});const mt=Array.from(new Set((q||[]).map(J=>String(J||"")).filter(Boolean))),Xt=ie({...e||{},name:n,sku:i,category:C,price:w,description:x,images:mt,image:mt[0]||void 0,specs:Se,variants:it,inventory:ct});r(Xt,e==null?void 0:e.id),s()},rt=!!((nt=(je=e==null?void 0:e.id)==null?void 0:je.startsWith)!=null&&nt.call(je,"owner-"));return!a||!e?null:React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 p-0 sm:p-6",role:"dialog","aria-modal":"true"},React.createElement("div",{ref:b,className:"w-full sm:max-w-3xl rounded-3xl border border-[var(--surface-border)] bg-[rgba(255,255,255,0.96)] backdrop-blur-xl shadow-soft-xl outline-none max-h-[90vh] overflow-y-auto"},React.createElement("div",{className:"flex items-center justify-between border-b border-[var(--surface-border)] bg-white/70 px-5 py-4"},React.createElement("h3",{className:"text-lg font-semibold text-slate-900"},"Edit product"),React.createElement("div",{className:"flex items-center gap-2"},!rt&&React.createElement("button",{onClick:()=>{h(e.id),s()},className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-1.5 text-sm font-semibold text-slate-700 transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Hide base"),rt&&React.createElement("button",{onClick:()=>{v(e.id),s()},className:"rounded-full border border-rose-300 bg-rose-50/80 px-3.5 py-1.5 text-sm font-semibold text-rose-700 transition hover:bg-rose-100 focus:outline-none focus-visible:outline-2 focus-visible:outline-rose-400"},"Delete"),React.createElement("button",{onClick:s,className:"rounded-full px-3.5 py-1.5 text-sm font-semibold text-slate-500 transition hover:bg-white/70 focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Close"))),React.createElement("div",{className:"grid gap-4 p-4 sm:grid-cols-2"},React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("div",{className:"relative aspect-square w-full overflow-hidden rounded-xl bg-gray-100"},React.createElement("img",{src:Be(q[se]||"",e.name),onError:n=>{n.currentTarget.src=we(e.name)},alt:`${e.name} \u2013 photo ${se+1} of ${q.length}`,className:"h-full w-full object-cover"}),q.length>1&&React.createElement(React.Fragment,null,React.createElement("button",{type:"button",onClick:_e,className:"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Previous photo"},"\u2039"),React.createElement("button",{type:"button",onClick:$t,className:"absolute right-2 top-1/2 -translate-y-1/2 rounded-full bg-white/90 p-2 shadow focus:outline-none focus-visible:outline-2 focus-visible:outline-brand","aria-label":"Next photo"},"\u203A"))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"text-xs text-slate-700 inline-flex items-center gap-2"},React.createElement("span",{className:"rounded-full border border-[var(--surface-border)] bg-white px-2 py-1"},"Add photos"),React.createElement("input",{type:"file",accept:"image/*",multiple:!0,onChange:me,className:"sr-only"}))),q.length>0&&React.createElement("div",{className:"flex gap-2 overflow-x-auto"},q.map((n,i)=>React.createElement("div",{key:i,className:te("relative h-14 w-20 flex-shrink-0 overflow-hidden rounded-md border",i===se?"border-brand":"border-[var(--surface-border)]")},React.createElement("button",{type:"button",onClick:()=>l(i),className:"absolute inset-0"},React.createElement("img",{src:Be(n,e.name),alt:"",className:"h-full w-full object-cover"})),React.createElement("button",{type:"button",onClick:()=>Gt(i),className:"absolute -right-1 -top-1 rounded-full bg-white border p-0.5 shadow","aria-label":`Remove photo ${i+1}`},"\xD7"))))),React.createElement("div",{className:"flex min-w-0 flex-col gap-3"},React.createElement("div",{className:"grid gap-3 sm:grid-cols-2"},React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Family"),React.createElement("select",{value:D,onChange:n=>_(n.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},React.createElement("option",{value:""},"(none)"),Ft.map(n=>React.createElement("option",{key:n,value:n},n)))),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Category"),React.createElement("select",{value:G,onChange:n=>y(n.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},Dt.map(n=>React.createElement("option",{key:n,value:n},n))))),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Name"),React.createElement("input",{value:c,onChange:n=>u(n.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"SKU"),React.createElement("input",{value:M,onChange:n=>F(n.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Base price"),React.createElement("input",{type:"number",min:0,step:"0.01",value:B,onChange:n=>re(n.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-slate-700"},"Description"),React.createElement("textarea",{rows:3,value:x,onChange:n=>z(n.target.value),className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white/70 px-3.5 py-2.5 text-sm text-slate-800 shadow-inner backdrop-blur focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("div",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},"Product information"),React.createElement("button",{type:"button",onClick:Kt,className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-2.5 py-1 text-xs font-semibold text-slate-600 hover:bg-white"},"Add")),React.createElement("div",{className:"mt-2 space-y-2"},K.map(n=>React.createElement("div",{key:n.id,className:"grid gap-2 sm:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_auto] items-center"},React.createElement("input",{value:n.label,onChange:i=>tt(n.id,"label",i.target.value),placeholder:"Label",className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-2 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}),React.createElement("input",{value:n.value,onChange:i=>tt(n.id,"value",i.target.value),placeholder:"Value (optional)",className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-2 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}),React.createElement("button",{type:"button",onClick:()=>zt(n.id),className:"rounded-full border border-[var(--surface-border)] bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white/70","aria-label":"Remove row"},"\xD7"))),K.length===0&&React.createElement("p",{className:"text-xs text-slate-500"},"No product information yet."))),React.createElement("div",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 p-3"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},"Customer options"),React.createElement("button",{type:"button",onClick:()=>E(n=>!n),className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-2.5 py-1 text-xs font-semibold text-slate-600 hover:bg-white"},"Add option group")),t&&React.createElement("div",{className:"mt-3 rounded-2xl border border-[var(--surface-border)] bg-white/80 p-3"},React.createElement("div",{className:"grid gap-2 sm:grid-cols-2"},React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Group name"),React.createElement("input",{value:j,onChange:n=>W(n.target.value),placeholder:"e.g. RAM",className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-2 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"})),React.createElement("label",{className:"block text-sm"},React.createElement("span",{className:"mb-1 block text-xs font-semibold uppercase tracking-[0.18em] text-slate-500"},"Options"),React.createElement("textarea",{rows:2,value:L,onChange:n=>T(n.target.value),placeholder:"One per line or comma-separated",className:"w-full rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-2 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}))),React.createElement("div",{className:"mt-2 flex justify-end gap-2"},React.createElement("button",{type:"button",onClick:()=>{E(!1),W(""),T("")},className:"rounded-full border border-[var(--surface-border)] bg-white px-3 py-1.5 text-sm font-semibold text-slate-700 hover:bg-white/70"},"Cancel"),React.createElement("button",{type:"button",onClick:Ht,className:"rounded-full bg-brand px-3 py-1.5 text-sm font-semibold text-white hover:bg-brand-muted"},"Add group"))),React.createElement("div",{className:"mt-3 grid gap-3"},Xe.length===0&&React.createElement("p",{className:"text-xs text-slate-500"},"No customer option groups yet."),Xe.map(n=>{const i=Array.isArray(m==null?void 0:m[n])?m[n]:[],g=O[n]||"",w=n==="Model"?Array.from(new Set([...Ut||[],...i])):n==="Color"?Array.from(new Set([...Pe||[],...i])):i;return React.createElement("div",{key:n,className:"space-y-2 rounded-2xl border border-[var(--surface-border)] bg-white/80 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},n),React.createElement("button",{type:"button",onClick:()=>qt(n),className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-2.5 py-1 text-xs font-semibold text-slate-600 hover:bg-white","aria-label":`Remove ${n}`},"\xD7")),n==="Model"||n==="Color"?React.createElement(Ja,{label:n==="Model"?"Models":"Colors",options:w,value:i,onChange:C=>Ie(n,C)}):React.createElement("div",{className:"flex flex-wrap gap-1.5 text-xs"},i.map(C=>React.createElement("span",{key:C,className:"inline-flex items-center gap-1 rounded-full border border-[var(--surface-border)] bg-white px-2.5 py-1 text-xs font-medium text-slate-600"},C,React.createElement("button",{type:"button",onClick:()=>Ie(n,i.filter(U=>U!==C)),className:"text-slate-500 hover:text-slate-800","aria-label":`Remove ${C}`},"\xD7"))),i.length===0&&React.createElement("span",{className:"text-xs text-slate-500"},"No options yet.")),React.createElement("div",{className:"flex gap-2"},React.createElement("input",{value:g,onChange:C=>N(U=>({...U||{},[n]:C.target.value})),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),at(n))},placeholder:"Add options (comma or newline)",className:"flex-1 rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-2 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}),React.createElement("button",{type:"button",onClick:()=>at(n),className:"rounded-full border border-[var(--surface-border)] bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white/70"},"Add")))}))),React.createElement("div",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},"Stock limits (optional)"),React.createElement("label",{className:"inline-flex items-center gap-2 text-xs font-semibold text-slate-600"},React.createElement("input",{type:"checkbox",checked:Z,onChange:n=>ne(n.target.checked)}),"Limit stock")),Z&&React.createElement("div",{className:"mt-2 space-y-2"},React.createElement("div",{className:"flex flex-wrap items-center justify-between gap-2"},React.createElement("div",{className:"flex items-center gap-2"},React.createElement("input",{value:f,onChange:n=>A(n.target.value),placeholder:"Default (e.g. 10)",inputMode:"numeric",className:"w-40 rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-2 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}),React.createElement("button",{type:"button",onClick:Yt,className:"rounded-full border border-[var(--surface-border)] bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white/70"},"Apply")),React.createElement("button",{type:"button",onClick:Vt,className:"rounded-full border border-[var(--surface-border)] bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white/70"},"Clear")),React.createElement("div",{className:"max-h-56 overflow-y-auto rounded-2xl border border-[var(--surface-border)] bg-white/80 p-3 space-y-2"},ve.map(({key:n,selection:i})=>{var g;return React.createElement("div",{key:n,className:"flex items-center justify-between gap-3"},React.createElement("span",{className:"text-xs text-slate-600"},et(i)),React.createElement("input",{value:(g=de[n])!=null?g:"",onChange:w=>Y(C=>({...C||{},[n]:w.target.value})),inputMode:"numeric",placeholder:"\u221E",className:"w-24 rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-1.5 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}))})),React.createElement("p",{className:"text-xs text-slate-500"},"Leave blank for unlimited stock."))),React.createElement("div",{className:"rounded-2xl border border-[var(--surface-border)] bg-white/70 p-3"},React.createElement("div",{className:"flex items-center justify-between gap-2"},React.createElement("span",{className:"text-sm font-semibold text-slate-800"},"Variant prices (optional)"),React.createElement("label",{className:"inline-flex items-center gap-2 text-xs font-semibold text-slate-600"},React.createElement("input",{type:"checkbox",checked:$,onChange:n=>Q(n.target.checked)}),"Override prices")),$&&React.createElement("div",{className:"mt-2 space-y-2"},React.createElement("div",{className:"flex justify-end"},React.createElement("button",{type:"button",onClick:Qt,className:"rounded-full border border-[var(--surface-border)] bg-white px-3 py-2 text-sm font-semibold text-slate-700 hover:bg-white/70"},"Clear overrides")),React.createElement("div",{className:"max-h-56 overflow-y-auto rounded-2xl border border-[var(--surface-border)] bg-white/80 p-3 space-y-2"},ve.map(({key:n,selection:i})=>{var g;return n===X?null:React.createElement("div",{key:n,className:"flex items-center justify-between gap-3"},React.createElement("span",{className:"text-xs text-slate-600"},et(i)),React.createElement("input",{value:(g=ce[n])!=null?g:"",onChange:w=>le(C=>({...C||{},[n]:w.target.value})),inputMode:"decimal",placeholder:String(Number(B)||0),className:"w-24 rounded-2xl border border-[var(--surface-border)] bg-white px-3 py-1.5 text-sm text-slate-800 shadow-inner focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"}))})),React.createElement("p",{className:"text-xs text-slate-500"},"Leave blank to use the base price."))),React.createElement("div",{className:"mt-2 flex justify-end gap-3"},React.createElement("button",{onClick:s,className:"rounded-full border border-[var(--surface-border)] bg-white px-4 py-2 text-sm text-slate-900 hover:bg-white/70"},"Cancel"),React.createElement("button",{onClick:Jt,className:"rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white transition hover:bg-brand-muted"},"Save changes"))))))}function Za({products:a,catalogConfig:s,onClose:e,onEdit:o,onHide:r,onDelete:h,onSave:v}){const[b,S]=P(""),[R,d]=P(null),p=ee(()=>{let c=a;if(b){const u=b.toLowerCase();c=c.filter(M=>M.name.toLowerCase().includes(u)||M.sku.toLowerCase().includes(u)||(M.description||"").toLowerCase().includes(u))}return c},[a,b]);return React.createElement("section",{"aria-labelledby":"mgr-title",className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-6"},React.createElement("div",{className:"sticky top-[var(--header-offset,64px)] z-30 border-b border-[var(--surface-border)] bg-[rgba(246,247,251,0.85)] backdrop-blur-lg"},React.createElement("div",{className:"flex items-center justify-between gap-3 py-2"},React.createElement("h2",{id:"mgr-title",className:"text-base sm:text-lg font-semibold text-slate-900"},"Owner \u2014 Manage catalogue"),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("label",{className:"relative"},React.createElement("span",{className:"sr-only"},"Search"),React.createElement("input",{value:b,onChange:c=>S(c.target.value),placeholder:"Search\u2026",type:"search",className:"w-48 sm:w-64 rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-medium text-slate-600 shadow-inner backdrop-blur placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-brand focus:border-transparent"}),React.createElement(Ye,{className:"pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"})),React.createElement("button",{onClick:e,className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-white focus:outline-none focus-visible:outline-2 focus-visible:outline-brand"},"Back")))),React.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},(p||[]).map(c=>React.createElement("article",{key:c.id,className:"group flex flex-col overflow-hidden rounded-3xl border border-[var(--surface-border)] bg-white/80 backdrop-blur transition hover:-translate-y-0.5 hover:shadow-soft-xl"},React.createElement("div",{className:"aspect-square w-full bg-gray-100"},React.createElement("img",{src:Be(Array.isArray(c.images)&&c.images[0]||c.image||"",c.name),onError:u=>{u.currentTarget.src=we(c.name)},alt:c.name,className:"h-full w-full object-cover"})),React.createElement("div",{className:"flex flex-1 flex-col gap-3 p-4"},React.createElement("header",null,React.createElement("h3",{className:"text-base font-semibold text-slate-900"},c.name),React.createElement("p",{className:"mt-0.5 text-xs text-slate-500"},"SKU: ",c.sku)),React.createElement("div",{className:"flex flex-wrap gap-1.5"},(c.specs||[]).slice(0,4).map(u=>React.createElement("span",{key:u,className:"inline-flex items-center rounded-full border border-[var(--surface-border)] bg-white/80 px-2.5 py-0.5 text-xs font-medium text-slate-600"},u))),React.createElement("div",{className:"mt-auto flex items-center justify-between"},React.createElement("span",{className:"font-semibold text-slate-900"},oe(c.price)),c.minOrder&&React.createElement("span",{className:"text-xs text-slate-500"},"MOQ ",c.minOrder)),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:()=>d(c),className:"flex-1 rounded-full bg-brand px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-brand-muted"},"Edit"),c.id.startsWith("owner-")?React.createElement("button",{onClick:()=>h(c.id),className:"rounded-full border border-red-300 bg-white px-3 py-2 text-sm text-red-700 hover:bg-red-50"},"Delete"):React.createElement("button",{onClick:()=>r(c.id),className:"rounded-full border border-[var(--surface-border)] bg-white/70 px-3.5 py-2 text-sm font-semibold text-slate-700 transition hover:bg-white"},"Hide")))))),React.createElement(Xa,{open:!!R,onClose:()=>d(null),product:R,catalogConfig:s,onSave:v,onHide:r,onDelete:h}))}function er(){const[a,s]=P(Nt),e=React.useRef(0),[o,r]=P(""),[h,v]=P("All"),[b,S]=P("All"),[R,d]=P(null),[p,c]=P(!1),[u,M]=P(!1),[F,G]=P(aa&&Ge),y=Fe?!0:Ge?F:!1,D=Ia(),_=bt?G:()=>{},[B,re]=P(null),x=ge(null),z=(f,A)=>{A&&(re({type:f,message:A}),x.current&&clearTimeout(x.current),x.current=setTimeout(()=>re(null),4e3))};V(()=>()=>{x.current&&clearTimeout(x.current)},[]);const{ownerProducts:K,setOwnerProducts:I,addProduct:q,deleteProduct:H,loading:se,connectionStatus:l}=ja(),m=fa(K),k=ee(()=>{const f=((m==null?void 0:m.families)||[]).map(le=>le&&typeof le=="object"?le.name:null).filter(Boolean),A=["iPhone","Samsung S","Samsung A","Accessories"],$=f.length?f:A,Q=[],ce=new Set;return $.forEach(le=>{const me=String(le||"").trim();!me||ce.has(me)||(ce.add(me),Q.push(me))}),["All",...Q]},[m]);V(()=>{k.includes(b)||S("All")},[k,b]),_a(!!(R||p),e);const N=ee(()=>{const f=new Map(Nt.map($=>[$.id,$])),A=[];return K.forEach($=>{if(!(!$||$.id===Ke)){if($.sourceId&&f.has($.sourceId)){if($.hidden){f.delete($.sourceId);return}f.delete($.sourceId)}$.hidden||($.sourceId?f.set($.id,$):A.push($))}}),[...A,...Array.from(f.values())]},[K]),t=ee(()=>{const f=new Map,A=new Set;return N.forEach($=>{if(!$||$.id===Ke)return;const Q=String($.category||"").trim();if(!Q||Q==="All")return;const ce=qe($);f.has(ce)||f.set(ce,new Set),f.get(ce).add(Q),A.add(Q)}),{byFamily:f,all:A}},[N]),E=ee(()=>{const f=Array.isArray(m==null?void 0:m.categories)?m.categories.filter(Boolean):[],A=f.length?f:Oe.filter(le=>le!=="All"),$=b==="All"?t.all:t.byFamily.get(b)||new Set,Q=A.filter(le=>$.has(le)),ce=Array.from($).filter(le=>!A.includes(le)).sort((le,me)=>le.localeCompare(me));return["All",...Q,...ce]},[m,b,t]);V(()=>{E.includes(h)||v("All")},[E,h]),V(()=>{v("All")},[b]);const j=ee(()=>{let f=N;return b!=="All"&&(f=f.filter(A=>qe(A)===b)),h!=="All"&&(f=f.filter(A=>A.category===h)),o&&(f=f.filter(A=>A.name.toLowerCase().includes(o.toLowerCase())||A.sku.toLowerCase().includes(o.toLowerCase())||(A.description||"").toLowerCase().includes(o.toLowerCase()))),f},[N,b,h,o]),W=ee(()=>{const f=new Map;return N.forEach(A=>{A&&A.id&&f.set(A.id,A)}),f},[N]),L=H;V(()=>(window.__setOwnerManage=M,()=>{window.__setOwnerManage=void 0}),[]);const T=f=>I(A=>{const $=A.findIndex(Q=>Q.id===f.id);if($>=0){const Q=[...A];return Q[$]=f,Q}return[...A,f]}),Z=async(f,A)=>{var me,_e;const $=(_e=(me=f.id)==null?void 0:me.startsWith)==null?void 0:_e.call(me,"owner-"),Q=ie($?f:{...f,id:`owner-${Date.now()}`,sourceId:A}),ce=await ft(Q);T(ce||Q),ce?z("success","Product updated."):z("warning","Product updated locally. Supabase sync pending.")},ne=async f=>{const A=ie({id:`owner-hide-${Date.now()}`,sourceId:f,hidden:!0,name:"",sku:"",category:"All",price:0,description:"",specs:[]}),$=await ft(A);T($||A),$?z("success","Base product hidden."):z("warning","Base product hidden locally. Supabase sync pending.")},de=async f=>{const A=await H(f);return A?z("success","Product deleted."):z("error","Could not delete product. Check your connection and try again."),A},Y=D.items.reduce((f,A)=>f+(Number(A.qty)||0),0);return se?React.createElement("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),React.createElement("p",{className:"text-slate-600"},"Loading products..."))):React.createElement("div",{className:"min-h-screen bg-slate-50"},React.createElement(Fa),B&&React.createElement("div",{className:te("fixed bottom-4 right-4 z-40 max-w-sm rounded-lg border px-4 py-3 text-sm shadow-lg backdrop-blur",B.type==="error"?"border-red-200 bg-red-50/90 text-red-700":B.type==="warning"?"border-amber-200 bg-amber-50/90 text-amber-800":"border-emerald-200 bg-emerald-50/90 text-emerald-700")},React.createElement("div",{className:"flex items-start gap-3"},React.createElement("span",{className:"flex-1 leading-snug"},B.message),React.createElement("button",{type:"button",onClick:()=>re(null),className:"text-xs font-medium uppercase tracking-wide text-slate-500 hover:text-slate-700"},"Dismiss"))),React.createElement(Da,{onOpenCart:()=>{e.current=window.scrollY||0,c(!0)},search:o,setSearch:r,ownerMode:y,setOwnerMode:_,cartQty:Y,connectionStatus:l,allowOwnerToggle:bt,families:k,family:b,setFamily:S,categories:E,category:h,setCategory:v}),y?u?React.createElement(Za,{products:N,catalogConfig:m,onClose:()=>M(!1),onEdit:f=>{e.current=window.scrollY||0,d({__edit:!0,product:f})},onHide:f=>ne(f),onDelete:f=>de(f),onSave:Z}):React.createElement(Qa,{addProduct:q,products:K,removeProduct:f=>de(f),onNotify:z}):React.createElement(React.Fragment,null,React.createElement(Ua),React.createElement(Ga,{categories:E,active:h,setActive:v}),React.createElement(Ka,{products:j,onOpen:f=>{e.current=window.scrollY||0,d(f&&f.__edit&&f.product?f.product:f)}})),React.createElement(qa,{product:R,onClose:()=>{d(null)},onAdd:D.add,cartItems:D.items}),React.createElement(Ya,{open:p,onClose:()=>c(!1),cart:D,productLookup:W}))}const tr=ReactDOM.createRoot(document.getElementById("root"));tr.render(React.createElement(er));})();
